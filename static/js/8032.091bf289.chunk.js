"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[8032],{8032:function(t,e,a){a.r(e);var o=a(15671),n=a(43144),s=a(60136),d=a(29388),i=a(47313),c=a(76666),l=a.n(c),u=a(41965),p=a(93298),r=a(66135),h=a(67114),g=a.n(h),C=a(3378),f=a(771),k=a(3737),S=a(78296),m=a(17861),y=a(4777),D=a(36122),T=a(86626),x=(a(34491),a(57422)),b=a(46417),v=i.lazy((function(){return a.e(58).then(a.bind(a,58))})),R=i.lazy((function(){return a.e(3364).then(a.bind(a,93364))})),P=new k.ZP({id:"editA",debug:!0,autoProceed:!0,restrictions:{maxFileSize:5e6,maxNumberOfFiles:100,minNumberOfFiles:1,allowedFileTypes:["image/*"]}});P.use(S.ZP,{target:"#a",params:{auth:{key:x.a},steps:{resize:{robot:"/image/resize",width:500,resize_strategy:"fit",background:"none"},store:{robot:"/wasabi/store",bucket_region:"us-west-1",bucket:x.B3,key:x.y9,secret:x._P,path:"ugc-suite/tmp/${file.id}.${file.ext}"}}},waitForEncoding:!0}),P.use(y.Z,{target:k.ZP.Dashboard,companionUrl:x.e0}),P.use(m.Z,{target:k.ZP.Dashboard,companionUrl:x.e0}),P.use(D.Z,{target:k.ZP.Dashboard,companionUrl:x.e0}),P.use(T.Z,{target:k.ZP.Dashboard,companionUrl:x.e0});var A=function(t){(0,s.Z)(a,t);var e=(0,d.Z)(a);function a(){var t;return(0,o.Z)(this,a),(t=e.call(this)).state={collection:null,showModalType:"uploadAssets",isUploaded:!1,uploadedData:[],selected:0,checkAll:!1,captionStatus:!1,captionText:"",tagsStatus:!1,tagstext:"",copyrightStatus:!1,copyrightValue:!1,collectionError:!1,updateRequest:!1,isUpdate:!1},t.updateStatusC=function(e){var a=t.state,o=a.uploadedData,n=a.captionText;o.map((function(t){t.checked&&e.target.checked?t.caption=n:t.caption=t.caption})),t.setState({captionStatus:e.target.checked,uploadedData:o})},t.updateStatusTag=function(e){var a=t.state,o=a.uploadedData,n=a.tagstext;o.map((function(t){t.checked&&e.target.checked?t.addTags=n:t.addTags=t.addTags})),t.setState({tagsStatus:e.target.checked,uploadedData:o})},t.updateStatusCopy=function(e){var a=t.state,o=a.uploadedData,n=a.copyrightValue;o.map((function(t){t.checked&&e.target.checked?t.copyright=n:t.copyright=t.copyright})),t.setState({copyrightStatus:e.target.checked,uploadedData:o})},t.onChangeCaption=function(e){var a=t.state,o=a.uploadedData,n=a.captionStatus;o.map((function(t){t.checked?t.caption=n?e.target.value:t.caption:t.caption=t.caption})),t.setState({captionText:e.target.value,uploadedData:o})},t.onLoadAddCaption=function(){var e=t.state,a=e.uploadedData,o=e.captionText;e.captionStatus&&(a.map((function(t,e){t.checked?a[e].caption=o:a[e].caption=""})),t.setState({uploadedData:a}))},t.onChangeTags=function(e){var a=t.state,o=a.uploadedData,n=a.tagsStatus;o.map((function(t){t.checked?t.addTags=n?e:t.addTags:t.addTags=t.addTags})),t.setState({tagstext:e,uploadedData:o})},t.onLoadTags=function(){var e=t.state,a=e.uploadedData,o=e.tagstext;e.tagsStatus&&a.map((function(t,e){t.checked?a[e].addTags=o:a[e].addTags=""})),t.setState({uploadedData:a})},t.onChangeCopyRight=function(e){return function(a){var o=t.state,n=o.uploadedData,s=o.copyrightStatus;n.map((function(t){t.checked?s&&(t.copyright=e):t.copyright=t.copyright})),t.setState({copyrightValue:e,uploadedData:n})}},t.onLoadCopyRight=function(){var e=t.state,a=e.uploadedData,o=e.copyrightValue;e.copyrightStatus&&(a.map((function(t,e){t.checked?a[e].copyright=o:a[e].copyright=!1})),t.setState({uploadedData:a}))},t.handleClose=function(){var e=t.state.uploadedData;e&&e.length>0?g().fire({title:"Are you sure?",text:"You want to  discard changes!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, discard changes!"}).then((function(e){e.isConfirmed&&(l()("#resetUppyUpload")&&l()("#resetUppyUpload").click(),t.props.editMediaHandleCallback(!1))})):t.props.editMediaHandleCallback(!1)},t.showModalTypeCallback=function(e){t.setState({showModalType:e})},t.isUploaded=function(){t.state.collection;t.setState({isUploaded:!t.state.isUploaded})},t.onUploadedData=function(e){var a=t.state,o=a.uploadedData,n=a.isUpdate;o.push(e),t.setState({uploadedData:o,isUpdate:!n},(function(){return t.onloadCheckedPostCount()}))},t.onDeleteUploadedData=function(e){var a=t.state.uploadedData;a=a.filter((function(t){return t.localId!=e})),t.setState({uploadedData:a},(function(){return t.onloadCheckedPostCount()}))},t.onClearUPloadObject=function(e){t.setState({uploadedData:e},(function(){return t.onloadCheckedPostCount()}))},t.onSelectedCollection=function(e){t.setState({collection:e,collectionError:!1})},t.onClickTORemovePost=function(e,a){return function(o){var n=t.state.uploadedData;e>-1&&(n.splice(e,1),a&&P.removeFile(a)),t.setState({uploadedData:n},(function(){return t.onloadCheckedPostCount()}))}},t.onClickTOCheckPost=function(e){return function(a){var o=t.state,n=o.uploadedData,s=o.captionText,d=o.tagstext,i=o.copyrightValue,c=o.captionStatus,l=o.tagsStatus,u=o.copyrightStatus;e>-1&&n[e]&&(n[e].checked?n[e].checked=!1:(n[e].checked=!0,c&&(n[e].caption=s),l&&(n[e].addTags=d),u&&(n[e].copyright=i))),t.setState({uploadedData:n},(function(){return t.onloadCheckedPostCount()}))}},t.onloadCheckedPostCount=function(){var e=t.state.uploadedData,a=e.filter((function(t){return 1==t.checked})).length;t.setState({selected:a,checkAll:e.length==a})},t.onClickToAllCheck=function(e){var a=t.state,o=a.uploadedData,n=a.checkAll,s=a.captionText,d=a.tagstext,i=a.copyrightValue,c=a.captionStatus,l=a.tagsStatus,u=a.copyrightStatus;o.map((function(t){t.checked=!n,1==!n?(c&&(t.caption=s),l&&(t.addTags=d),u&&(t.copyright=i)):(t.caption="",t.addTags="",t.copyright="")})),t.setState({uploadedData:o,selected:1==!n?o.length:0,checkAll:!n})},t.onCaptionSingle=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].checked=!1,n[e].captionSubmit=a,t.setState({uploadedData:n,updateRequest:!s},(function(){return t.onloadCheckedPostCount()})))},t.onSubmitCaption=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].caption=a,n[e].checked=!1,t.setState({uploadedData:n,updateRequest:!s},(function(){return t.onloadCheckedPostCount()})))},t.onResetCaption=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].caption="",t.setState({uploadedData:n,updateRequest:!s}))},t.onAddTagSingle=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].addTagsSubmit=a,n[e].checked=!1,t.setState({uploadedData:n,updateRequest:!s},(function(){return t.onloadCheckedPostCount()})))},t.onAddTagReset=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].addTags="",t.setState({uploadedData:n,updateRequest:!s}))},t.onAddTagSubmit=function(e,a){var o=t.state,n=o.uploadedData,s=o.updateRequest;e>-1&&n[e]&&(n[e].addTags=a,n[e].checked=!1,t.setState({uploadedData:n,updateRequest:!s},(function(){return t.onloadCheckedPostCount()})))},t.onCopyRightSingle=function(e,a){return function(o){var n=t.state,s=n.uploadedData,d=n.updateRequest;e>-1&&s[e]&&(s[e].copyright=a,s[e].checked=!1),t.setState({uploadedData:s,updateRequest:!d},(function(){return t.onloadCheckedPostCount()}))}},t}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){var t=this,e=this.props.accountList;(0,C.xw)().then((function(e){var a=e.data,o=a.response_code,n=a.networks,s=a.authRequire;200===o&&t.props.getNetworkList({networks:n,authRequire:s})})).catch((function(t){})),e&&e.length<=0&&this.props.getAllConnectedAccounts();var a=document.querySelector(".offcanvas-backdrop");a&&a.click()}},{key:"render",value:function(){var t=this,e=this.props,a=e.editMediaToggle,o=e.history,n=this.state,s=n.isUploaded,d=n.uploadedData,c=n.collection;return(0,b.jsxs)(u.Z,{size:"full",show:a,className:"addAssetsModal border-0 p-0",backdrop:!1,children:[(0,b.jsx)(u.Z.Header,{className:"py-0 px-lg-7 px-3 w-100 ".concat(s?"":"border-0"),children:(0,b.jsxs)("div",{className:"d-flex justify-content-between align-items-center bg-white w-100",children:[s?(0,b.jsxs)("div",{className:"addAssetsTitle d-flex align-items-center flex-shrink-1",children:[(0,b.jsx)(p.Z,{variant:"link",className:"btn btn-icon btn-sm me-2 text-decoration-none",onClick:function(){return t.isUploaded()},children:(0,b.jsx)("i",{className:"ri-arrow-left-line icon-6"})}),(0,b.jsx)("h1",{className:"text-dark fw-semibold fs-6 mb-0",children:"Fill required assets information"})]}):(0,b.jsx)("div",{className:"addAssetsTitle d-flex align-items-center flex-shrink-1"}),(0,b.jsx)("div",{className:"d-flex align-items-center",children:(0,b.jsx)(p.Z,{variant:"close",className:"text-light",onClick:this.handleClose})})]})}),(0,b.jsx)(u.Z.Body,{className:"p-0 d-flex align-items-start border-0 flex-wrap w-100",children:(0,b.jsx)("div",{className:"assetsModalScroll w-100 px-lg-5 px-3",children:s?(0,b.jsx)(i.Suspense,{fallback:(0,b.jsx)(b.Fragment,{}),children:(0,b.jsx)(v,{uploadedData:d,length:d.length,selected:this.state.selected,onClickTORemovePost:this.onClickTORemovePost,onClickTOCheckPost:this.onClickTOCheckPost,updateStatusC:this.updateStatusC,updateStatusTag:this.updateStatusTag,updateStatusCopy:this.updateStatusCopy,captionStatus:this.state.captionStatus,tagsStatus:this.state.tagsStatus,copyrightStatus:this.state.copyrightStatus,onChangeCaption:this.onChangeCaption,updateRequest:this.state.updateRequest,onChangeTags:this.onChangeTags,onChangeCopyRight:this.onChangeCopyRight,captionText:this.state.captionText,tagstext:this.state.tagstext,copyrightValue:this.state.copyrightValue,onClickToAllCheck:this.onClickToAllCheck,checkAll:this.state.checkAll,collection:c,history:o,editMediaHandleCallback:this.props.editMediaHandleCallback,onCaptionSingle:this.onCaptionSingle,onAddTagSingle:this.onAddTagSingle,onCopyRightSingle:this.onCopyRightSingle,onAddTagSubmit:this.onAddTagSubmit,onSubmitCaption:this.onSubmitCaption,onAddTagReset:this.onAddTagReset,onResetCaption:this.onResetCaption,onClearUPloadObject:this.onClearUPloadObject,uppyPostEdit:P})}):(0,b.jsx)(i.Suspense,{fallback:(0,b.jsx)(b.Fragment,{}),children:(0,b.jsx)(R,{getAssetsCallback:this.isUploaded,onUploadedData:this.onUploadedData,onClearUPloadObject:this.onClearUPloadObject,history:o,uploadedData:this.state.uploadedData,onSelectedCollection:this.onSelectedCollection,collection:c,collectionError:this.state.collectionError,editMediaHandleCallback:this.props.editMediaHandleCallback,isUpdate:this.state.isUpdate,uppyPostEdit:P,uploadClose:this.handleClose,onDeleteUploadedData:this.onDeleteUploadedData})})})})]})}}]),a}(i.Component);e.default=(0,r.$j)((function(t){return{accountList:t.addFeed.allConnectedAcc}}),(function(t){return{getNetworkList:function(e){return t({type:f.$H,payload:e})},getAllConnectedAccounts:function(){return t((0,C.YQ)())}}}))(A)}}]);