"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[7463],{97463:function(e,t,s){s.r(t);var a=s(15671),n=s(43144),l=s(60136),i=s(29388),o=s(47313),c=s(66135),d=s(41965),r=s(32605),g=s(11946),u=s(93529),m=s(46417),h=function(e){(0,l.Z)(s,e);var t=(0,i.Z)(s);function s(e){var n;return(0,a.Z)(this,s),(n=t.call(this,e)).state={tagString:[],newTag:"",listTags:[],selectedOption:null,isLoading:!1},n.addTagValue=function(e){},n.onClickToRemoveTag=function(e){return function(t){var s=n.state.tagString;s.splice(e,1),n.setState({tagString:s})}},n.handleClose=function(){n.props.addTagCallback(!1)},n.onClickNewAddTag=function(e){var t=n.state,s=t.newTag,a=t.tagString;n.props.modalAssetData;s&&String(s).length>=3&&(a.push(s),n.setState({tagString:a,newTag:"",selectedOption:null}))},n.addNewTag=function(e){return n.setState({newTag:e.target.value})},n.onClickToSave=function(e){var t=n.state,s=t.tagString,a=(t.isLoading,n.props),l=a.modalAssetData,i=a.addTagShowModal;s&&s.length>0&&(i&&null==l?(n.setState({isLoading:!0}),n.props.AddTagAll(s.join(","),(function(){n.props.addTagCallback(!1),n.setState({isLoading:!1})}))):(n.setState({isLoading:!0}),n.props.postAddTag({postId:String(l.id),tags:s.join(",")},(function(){n.setState({isLoading:!1}),n.props.loadAssetsDataWithDispatch()}))))},n.setNewTags=function(e){e&&e.value?n.setState({newTag:e.value,selectedOption:e}):n.setState({newTag:"",selectedOption:null})},n}return(0,n.Z)(s,[{key:"componentWillMount",value:function(){var e=this.props.tagList;if(e&&e.length>0){var t=[];e.map((function(e){t.push({value:e,label:e})})),this.setState({listTags:t})}}},{key:"componentDidMount",value:function(){var e=this.props.modalAssetData;e&&Object.keys(e).length>0&&e.tags&&String(e.tags).length>0&&this.setState({tagString:String(e.tags).split(",")})}},{key:"render",value:function(){var e=this,t=this.props,s=t.addTagShowModal,a=t.modalAssetData,n=this.state,l=n.tagString,i=(n.newTag,n.listTags),o=n.selectedOption,c=n.isLoading,g=!!(a&&Object.keys(a).length>0);return s?(0,m.jsxs)(d.Z,{show:s,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,m.jsx)(d.Z.Header,{closeButton:!0,children:(0,m.jsx)(d.Z.Title,{children:"Add Tag"})}),(0,m.jsx)(d.Z.Body,{children:(0,m.jsxs)("div",{className:"mx-xl-4 px-2 px-lg-4 mx-0 pt-4",children:[(0,m.jsxs)("div",{className:"row",children:[g?(0,m.jsx)("div",{className:"col-lg-5",children:(0,m.jsx)("div",{className:"card-body d-flex flex-column mb-3",children:(0,m.jsx)("div",{className:"d-flex align-items-center cursor-pointer",children:(0,m.jsx)("div",{className:"position-relative rounded-1 bg-light overflow-hidden w-100",style:{paddingBottom:"120%",width:"100%"},children:(0,m.jsx)("img",{className:"object-center-cover position-absolute",loading:"lazy",src:a.postFile,height:500,width:300,alt:"suit"})})})})}):null,(0,m.jsxs)("div",{className:"col-lg-".concat(g?"7":"12"),children:[(0,m.jsxs)("div",{className:"mb-3 mb-xl-4",children:[(0,m.jsx)("label",{className:"text-muted fw-semibold mb-2",children:"Add Tag"}),(0,m.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,m.jsx)("div",{className:"position-relative d-flex flex-grow-1 flex-column pe-2",children:(0,m.jsx)(r.Z,{className:"selectpicker",classNamePrefix:"selectpicker",isClearable:!0,options:i,onChange:this.setNewTags,value:o})}),(0,m.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.onClickNewAddTag,children:"Add"})]})]}),(0,m.jsx)("div",{className:"mb-3 mb-xl-4",children:(0,m.jsx)("div",{style:{minHeight:220},children:(0,m.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap",children:l.map((function(t,s){return(0,m.jsxs)("div",{className:"badge bg-secondary text-gray-800 rounded-pill border me-2 mb-2",children:[(0,m.jsx)("span",{className:"text-break",style:{whiteSpace:"normal"},children:t}),(0,m.jsx)("button",{className:"btn btn-sm p-0 ms-1",onClick:e.onClickToRemoveTag(s),children:(0,m.jsx)("i",{className:"ri-close-line icon-7"})})]},t.toString())}))})})})]})]}),(0,m.jsx)("div",{className:"d-flex alert alert-secondary",children:(0,m.jsx)("div",{className:"d-flex flex-column flex-stack flex-grow-1",children:(0,m.jsx)("p",{className:"mb-0 text-gray-800",children:"Tags will help you improve content filtering."})})})]})}),(0,m.jsx)(d.Z.Footer,{className:"p-3",children:(0,m.jsxs)("div",{className:"mx-xl-4 px-2 px-lg-4 mx-0",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm btn-min-w me-3",onClick:this.handleClose,children:"Cancel"}),(0,m.jsx)("button",{type:"button",className:"btn btn-primary btn-sm btn-min-w ".concat(c?"spinner":""),onClick:this.onClickToSave,children:"Save"})]})})]}):null}}]),s}(o.Component);t.default=(0,c.$j)((function(e){return{tagList:e.tags.tagList}}),(function(e){return{postAddTag:function(t,s){return e((0,g._)(t,s))},AddTagAll:function(t,s){return e((0,u._g)(t,s))},loadAssetsDataWithDispatch:function(){return e((0,u.oF)())}}}))(h)}}]);