"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[3609],{73609:function(e,t,n){n.r(t);var o=n(1413),s=n(15671),l=n(43144),i=n(97326),a=n(60136),c=n(29388),r=n(72791),u=n(9085),p=n(21830),d=n.n(p),h=n(78687),g=(n(46305),n(32002)),m=n(93255),f=n(80184),y=r.lazy((function(){return n.e(8923).then(n.bind(n,38923))})),S=r.lazy((function(){return n.e(3566).then(n.bind(n,53566))})),A=r.lazy((function(){return n.e(6106).then(n.bind(n,86106))})),C=r.lazy((function(){return n.e(2835).then(n.bind(n,32835))})),v=r.lazy((function(){return n.e(1013).then(n.bind(n,61013))})),k=r.lazy((function(){return n.e(4464).then(n.bind(n,74464))})),b=r.lazy((function(){return Promise.all([n.e(2956),n.e(8063)]).then(n.bind(n,48063))})),w=function(e){var t={};return e&&String(e).length>0&&String(e).split(",").map((function(e){t[e]=!0})),t},j=function(e){var t=[];return e&&String(e).length>0&&String(e).split(",").map((function(e){t.push(e)})),t},L=function(e){var t={};return e&&String(e).length>0&&(String(e).includes("1")?t[1]=!0:String(e).includes("2")&&(t[2]=!0),String(e).includes("3")&&(t[3]=!0)),t},D=function(e){var t={};return e&&String(e).length>0&&(String(e).includes("2,4")?t["2,4"]=!0:String(e).includes("3,5")&&(t["3,5"]=!0),String(e).includes("1")&&(t[1]=!0)),t},R=function(e,t,n,o,s,l,i,a){var c={};return e&&(c.assetsType=!0),t&&(c.collection=!0),n&&(c.connection=!0),o&&(c.source=!0),s&&(c.tags=!0),l&&(c.ugcrights=!0),i&&(c.sentiment=!0),a&&(c.recommend=!0),c},F=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var l;(0,s.Z)(this,n),(l=t.call(this,e)).timeout=0,l.onClickToDelete=function(e){return function(t){d().fire({title:"Are you sure?",text:"You want to delete this",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then((function(t){if(t.isConfirmed){var n=(0,i.Z)(l);(0,g.bD)(e).then((function(e){n.onLoadPublish(),u.Am.success("Your widget has been deleted.")})).catch((function(e){}))}}))}},l.onTagApply=function(e){var t=l.state.tagApply;t.push(e),l.setState({tagApply:t})},l.onTagRemove=function(e){return function(t){var n=l.state.tagApply;n.splice(e,1),l.setState({tagApply:n})}},l.conditionApply=function(e){return function(t){l.setState({condition:e})}},l.filterApply=function(e){return function(t){var n=l.state.chooseFilter,s={};n[e]?(delete n[e],"collection"==e&&(s={selectedCollection:{}}),"source"==e&&(s={selectedNetwork:{}}),"assetsType"==e&&(s={assetsApply:{}}),"tags"==e&&(s={tagApply:[]}),"ugcrights"==e&&(s={ugcRigths:{}}),"connection"==e&&(s={selectedConnection:{}}),"recommend"==e&&(s={recommendApply:{}}),"sentiment"==e&&(s={sentimentApply:{}}),l.setState((0,o.Z)({chooseFilter:n,activeKey:""},s))):(n[e]=!0,l.setState({chooseFilter:n,activeKey:e}))}},l.onSelectActive=function(e){return function(t){l.setState({activeKey:l.state.activeKey==e?"":e,accordionKey:""})}},l.onSelectAccordionActive=function(e){l.setState({accordionKey:e,activeKey:""})},l.shareEmbedModal=function(e){return l.setState({showGenratedCode:!0})},l.genratedCodeCallback=function(e){l.setState({showGenratedCode:e,accordionKey:""})},l.renderSwitch=function(e){var t=l.state.responseData;switch(e){case"p-html":default:return(0,f.jsx)(y,{data:t});case"p-wordpress":return(0,f.jsx)(S,{data:t});case"p-wix":return(0,f.jsx)(A,{data:t});case"p-squarespace":return(0,f.jsx)(C,{data:t});case"p-shopify":return(0,f.jsx)(v,{data:t});case"p-other":return(0,f.jsx)(k,{data:t})}},l.onSelectTemplate=function(e){return l.setState({selectedTemplate:e,accordionKey:""})},l.onRecommendationApply=function(e){return function(t){var n=l.state.recommendApply;n[e]?(delete n[e],l.setState({recommendApply:n})):(n[e]=!0,l.setState({recommendApply:n}))}},l.onLanguage=function(e){var t=l.state.languageApply;t=e,l.setState({languageApply:t,accordionKey:""})},l.onPopularPost=function(e){var t=l.state.popularPosts;t=e,l.setState({popularPosts:t,accordionKey:""})},l.onSelectAllRecommendationApply=function(e){var t=l.state.recommendApply;t&&Object.keys(t).length>=3?l.setState({recommendApply:{}}):l.setState({recommendApply:{1:!0,2:!0,3:!0}})},l.onSentimentApply=function(e){return function(t){var n=l.state.sentimentApply;n[e]?(delete n[e],l.setState({sentimentApply:n})):(n[e]=!0,l.setState({sentimentApply:n}))}},l.onSelectAllSentimentApply=function(e){var t=l.state.sentimentApply;t&&Object.keys(t).length>=3?l.setState({sentimentApply:{}}):l.setState({sentimentApply:{1:!0,2:!0,3:!0}})},l.onUgcRigths=function(e){return function(t){var n=l.state.ugcRigths;n[e]?(delete n[e],l.setState({ugcRigths:n})):(n[e]=!0,l.setState({ugcRigths:n}))}},l.onSelectAllUgcRigths=function(e){var t=l.state.ugcRigths;t&&Object.keys(t).length>=3?l.setState({ugcRigths:{}}):l.setState({ugcRigths:{1:!0,2:!0,3:!0}})},l.onconnectionApply=function(e){return function(t){var n=l.state.selectedConnection;n[e]?(delete n[e],l.setState({selectedConnection:n})):(n[e]=!0,l.setState({selectedConnection:n}))}},l.onConnectionSelectAll=function(e){var t=l.state,n=t.selectedConnection,o=t.feedData;if(n&&Object.keys(n).length>=o.length)l.setState({selectedConnection:{}});else{var s={};o.map((function(e){s[e.feedId]=!0})),l.setState({selectedConnection:s})}},l.onConnectionSearchFilter=function(e){var t=e.target.value;l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout((function(){l.setState({textConnectionSearch:t?String(t).toLowerCase():t},(function(){return l.onLoadConnectionFilterData()}))}),1e3)},l.onLoadConnectionFilterData=function(){var e=l.props.feedData,t=l.state.textConnectionSearch,n=e.filter((function(e){return String(e.name).toLowerCase().includes(t)}));l.setState({feedData:n})},l.onAssetsApply=function(e){return function(t){var n=l.state.assetsApply;n[e]?(delete n[e],l.setState({assetsApply:n})):(n[e]=!0,l.setState({assetsApply:n}))}},l.onSelectAllAssetsApply=function(e){var t=l.state.assetsApply;t&&Object.keys(t).length>=3?l.setState({assetsApply:{}}):l.setState({assetsApply:{1:!0,"2,4":!0,"3,5":!0}})},l.onNetworkApply=function(e){return function(t){var n=l.state.selectedNetwork;n[e]?(delete n[e],l.setState({selectedNetwork:n})):(n[e]=!0,l.setState({selectedNetwork:n}))}},l.onClickSelectAll=function(e){var t=l.state.selectedNetwork;if(t&&Object.keys(t).length>=e.length)l.setState({selectedNetwork:{}});else{var n={};e.map((function(e){n[e.id]=!0})),n=e.hasOwnProperty(2)?(0,o.Z)({18:!0},n):n,l.setState({selectedNetwork:n})}},l.onSearchFilter=function(e){var t=e.target.value;l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout((function(){l.setState({textSearch:t?String(t).toLowerCase():t},(function(){return l.onLoadFilterData()}))}),1e3)},l.onLoadFilterData=function(){var e=l.props.networks,t=l.state.textSearch,n=e.filter((function(e){return String(e.name).toLowerCase().includes(t)}));l.setState({networkData:n})},l.onLoadCollectionList=function(){var e=(0,i.Z)(l),t=l.props.collectionData;t&&Object.keys(t).length>0&&t.collectionList.length>0&&e.setState({collectionList:t.collectionList,collectionCompleteList:t.collectionList,assetsCount:t.assetsCount})},l.onCollectionApply=function(e){return function(t){var n=l.state.selectedCollection;n[e]?(delete n[e],l.setState({selectedCollection:n})):(n[e]=!0,l.setState({selectedCollection:n}))}},l.onCollectionSelectAll=function(e){var t=l.state,n=t.selectedCollection,o=t.collectionList;if(n&&Object.keys(n).length>=o.length)l.setState({selectedCollection:{}});else{var s={};o.map((function(e){s[e.id]=!0})),l.setState({selectedCollection:s})}},l.onCollectionSearchFilter=function(e){var t=e.target.value;l.timeout&&clearTimeout(l.timeout),l.timeout=setTimeout((function(){l.setState({collectionSearch:t?String(t).toLowerCase():t},(function(){return l.onLoadCollectionFilterData()}))}),1e3)},l.onLoadCollectionFilterData=function(){var e=l.state,t=e.collectionSearch,n=e.collectionCompleteList.filter((function(e){return String(e.name).toLowerCase().includes(t)}));l.setState({collectionList:n})},l.onChangeName=function(e){l.setState({publishCodeName:e.target.value})},l.onRequestPublish=function(e){var t=l.state,n=t.id,o=t.selectedTemplate,s=t.selectedCollection,a=t.selectedConnection,c=t.selectedNetwork,r=t.condition,p=t.showGenratedCode,d=t.ugcRigths,h=t.assetsApply,m=t.publishCodeName,f=t.tagApply,y=t.recommendApply,S=t.sentimentApply,A=t.languageApply,C=t.popularPosts,v=(0,i.Z)(l),k=[],b="",w=[],j=[],L=[],D=[],R=[],F=[],O=[],P="",T=null;if(d&&Object.keys(d).length>0&&Object.keys(d).map((function(e){R.push(e)})),o&&Object.keys(o).length>0&&o.id&&(b=o.id),c&&Object.keys(c).length>0&&Object.keys(c).map((function(e){D.push(e)})),s&&Object.keys(s).length>0&&Object.keys(s).map((function(e){k.push(e)})),y&&Object.keys(y).length>0&&Object.keys(y).map((function(e){F.push(e)})),S&&Object.keys(S).length>0&&Object.keys(S).map((function(e){O.push(e)})),a&&Object.keys(a).length>0&&Object.keys(a).map((function(e){w.push(e)})),h&&Object.keys(h).length>0&&Object.keys(h).map((function(e){j.push(e)})),f&&f.length>0&&(L=f),A&&Object.keys(A).length>0&&(P=A.value),C&&Object.keys(C).length>0&&(T=C.value),o&&Object.keys(o).length>0&&o.id&&(k.length>0||w.length>0||L.length>0||j.length>0||R.length>0||D.length>0||O.length>0||F.length>0)&&m&&String(m).trim().length>0){var x={id:n,name:m,template:b,collection:k.join(","),source:w.join(","),assets_type:j.join(","),tags:L.join(","),ugc_status:R.join(","),publish_type:1,campaign_type:"",recommend:F.join(","),sentiment:O.join(","),screen_type:"",platform:p||"",language:""!=P?P:"default",popularPosts:null!=T?T:0,network:D.join(","),filterType:String(r).toUpperCase()};l.setState({isUpdating:!0}),(0,g.S5)(x).then((function(e){var t=e.data,n=t.status,o=(t.response_code,t.response_message);"success"==n?(u.Am.success("Publish widget successfully updated."),v.setState({isUpdating:!1},(function(){v.props.onLoadPublish(),v.props.reloadIframe()}))):v.setState({isUpdating:!1},(function(){return u.Am.error(o)}))})).catch((function(e){var t=e.response.data;v.setState({isUpdating:!1},(function(){return u.Am.error(t.message)}))}))}else o?m&&String(m).trim().length>0?u.Am.error("Please select filter.",{autoClose:3e3}):u.Am.error("Please enter valid Widget name.",{autoClose:3e3}):u.Am.error("Please select template.",{autoClose:3e3})},l.onResetFilter=function(e){var t=(0,i.Z)(l).state,n=(0,i.Z)(l);t.chooseFilter&&Object.keys(t.chooseFilter).length>0?d().fire({title:"Are you sure?",text:"Your changes have not been saved. Do you want to save before you leave the page?",icon:"warning",showCancelButton:!0,confirmButtonText:"Discard Changes"}).then((function(e){e.isConfirmed&&n.props.history("/web-embed")})):n.props.history("/web-embed")};var a=e.item,c=e.templeteList,r=e.languages,p={};if(c&&c.length>0){var h=c.filter((function(e){return e.id==a.template}));p=h&&h.length>0?h[0]:{id:a.template}}else p={id:a.template};return l.state={showGenratedCode:a.platform?a.platform:"p-html",chooseFilter:R(a.assets_type,a.collection,a.source,a.network,a.tags,a.ugc_status,a.sentiment,a.recommend,a.language,a.popularPosts),collectionApply:[],sourceApply:{},assetsApply:D(a.assets_type),tagApply:j(a.tags),ugcRigths:{},selectedTemplate:p,condition:String(a.filterType).toLowerCase(),networkData:[],feedData:[],recommendApply:L(a.recommend),sentimentApply:L(a.sentiment),selectedNetwork:w(a.network),selectedConnection:w(a.source),textSearch:"",textConnectionSearch:"",collectionList:[],collectionCompleteList:[],selectedCollection:w(a.collection),collectionSearch:"",genrateCode:!1,publishList:[],responseData:a,activeFilter:null,selectedWebEmbed:null,publishCodeName:a.name?a.name:"Untitled-1",id:a.id,isUpdating:!1,languageApply:r.filter((function(e){return e.value==a.language}))[0],popularPosts:m.VI.filter((function(e){return e.value==a.popularPosts}))[0],accordionKey:""},l}return(0,l.Z)(n,[{key:"componentWillMount",value:function(){this.onLoadCollectionList()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.networks,n=e.feedData;this.setState({networkData:t,feedData:n.feeds})}},{key:"componentWillReceiveProps",value:function(e){var t=e.networks,n=e.feedData;this.setState({networkData:t,feedData:n.feeds})}},{key:"render",value:function(){var e=this.state,t=e.showGenratedCode,n=(e.chooseFilter,e.genrateCode,e.responseData,e.activeFilter),o=this.props,s=(o.networks,o.history);return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(b,{genratedCodeCallback:this.genratedCodeCallback,genratedCodeModal:t,filterApply:this.filterApply,state:this.state,onSelectTemplate:this.onSelectTemplate,onSelectAllUgcRigths:this.onSelectAllUgcRigths,onUgcRigths:this.onUgcRigths,onTagRemove:this.onTagRemove,onTagApply:this.onTagApply,onAssetsApply:this.onAssetsApply,onconnectionApply:this.onconnectionApply,onSelectAllAssetsApply:this.onSelectAllAssetsApply,onNetworkApply:this.onNetworkApply,onClickSelectAll:this.onClickSelectAll,onSearchFilter:this.onSearchFilter,onCollectionSearchFilter:this.onCollectionSearchFilter,onCollectionSelectAll:this.onCollectionSelectAll,onCollectionApply:this.onCollectionApply,conditionApply:this.conditionApply,onConnectionSearchFilter:this.onConnectionSearchFilter,onConnectionSelectAll:this.onConnectionSelectAll,onClickToDelete:this.onClickToDelete,onResetFilter:this.onResetFilter,activeFilter:n,history:s,onChangeName:this.onChangeName,onUpdateReponseData:this.onUpdateReponseData,onLoadPublish:this.onLoadPublish,onSelectActive:this.onSelectActive,onRequestPublish:this.onRequestPublish,isPublishEdit:!0,onRecommendationApply:this.onRecommendationApply,onSelectAllRecommendationApply:this.onSelectAllRecommendationApply,onSentimentApply:this.onSentimentApply,onSelectAllSentimentApply:this.onSelectAllSentimentApply,onLanguage:this.onLanguage,onPopularPost:this.onPopularPost,onSelectAccordionActive:this.onSelectAccordionActive})})}}]),n}(r.Component);t.default=(0,h.$j)((function(e){return{networks:e.networks.networkData,feedData:e.feedData.filterList,collectionData:e.collection,templeteList:e.templates.templeteList,languages:e.jsons.languages}}))(F)}}]);
//# sourceMappingURL=3609.5bf01530.chunk.js.map