"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[9730],{39730:function(e,t,n){n.r(t);var a=n(15671),i=n(43144),s=n(60136),o=n(29388),l=n(72791),r=n(78687),c=n(95316),d=n(86836),g=n(52),u=n(94111),p=n(80184),m=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).state={tagString:[],newTag:"",listTags:[],selectedOption:null,isLoading:!1},i.addTagValue=function(e){},i.onClickToRemoveTag=function(e){return function(t){var n=i.state.tagString;n.splice(e,1),i.setState({tagString:n})}},i.handleClose=function(){i.props.addTagCallback(!1)},i.onClickNewAddTag=function(e){var t=i.state,n=t.newTag,a=t.tagString;i.props.modalAssetData;n&&String(n).length>=3&&(a.push(n),i.setState({tagString:a,newTag:"",selectedOption:null}))},i.addNewTag=function(e){return i.setState({newTag:e.target.value})},i.onClickToSave=function(e){var t=i.state,n=t.tagString,a=(t.isLoading,i.props),s=a.modalAssetData,o=a.addTagShowModal;n&&n.length>0&&(o&&null==s?(i.setState({isLoading:!0}),i.props.AddTagAll(n.join(","),(function(){i.props.addTagCallback(!1),i.setState({isLoading:!1})}))):(i.setState({isLoading:!0}),i.props.postAddTag({postId:String(s.id),tags:n.join(",")},(function(){i.setState({isLoading:!1}),i.props.loadAssetsDataWithDispatch()}))))},i.setNewTags=function(e){e&&e.value?i.setState({newTag:e.value,selectedOption:e}):i.setState({newTag:"",selectedOption:null})},i}return(0,i.Z)(n,[{key:"componentWillMount",value:function(){var e=this.props.tagList;if(e&&e.length>0){var t=[];e.map((function(e){t.push({value:e,label:e})})),this.setState({listTags:t})}}},{key:"componentDidMount",value:function(){var e=this.props.modalAssetData;e&&Object.keys(e).length>0&&e.tags&&String(e.tags).length>0&&this.setState({tagString:String(e.tags).split(",")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.addTagShowModal,a=t.modalAssetData,i=this.state,s=i.tagString,o=(i.newTag,i.listTags),l=i.selectedOption,r=i.isLoading,g=!!(a&&Object.keys(a).length>0);return n?(0,p.jsxs)(c.Z,{show:n,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,p.jsx)(c.Z.Header,{closeButton:!0,children:(0,p.jsx)(c.Z.Title,{children:"Add Tag"})}),(0,p.jsx)(c.Z.Body,{children:(0,p.jsxs)("div",{className:"mx-xl-4 px-2 px-lg-4 mx-0 pt-4",children:[(0,p.jsxs)("div",{className:"row",children:[g?(0,p.jsx)("div",{className:"col-lg-5",children:(0,p.jsx)("div",{className:"card-body d-flex flex-column mb-3",children:(0,p.jsx)("div",{className:"d-flex align-items-center cursor-pointer",children:(0,p.jsx)("div",{className:"position-relative rounded-1 bg-light overflow-hidden w-100",style:{paddingBottom:"120%",width:"100%"},children:(0,p.jsx)("img",{className:"object-center-cover position-absolute",loading:"lazy",src:a.postFile,height:500,width:300,alt:"suit"})})})})}):null,(0,p.jsxs)("div",{className:"col-lg-".concat(g?"7":"12"),children:[(0,p.jsxs)("div",{className:"mb-3 mb-xl-4",children:[(0,p.jsx)("label",{className:"text-muted fw-semibold mb-2",children:"Add Tag"}),(0,p.jsxs)("div",{className:"d-flex align-items-center w-100",children:[(0,p.jsx)("div",{className:"position-relative d-flex flex-grow-1 flex-column pe-2",children:(0,p.jsx)(d.Z,{isClearable:!0,options:o,onChange:this.setNewTags,value:l})}),(0,p.jsx)("button",{type:"button",className:"btn btn-primary",onClick:this.onClickNewAddTag,children:"Add"})]})]}),(0,p.jsx)("div",{className:"mb-3 mb-xl-4",children:(0,p.jsx)("div",{style:{minHeight:220},children:(0,p.jsx)("div",{className:"tags-group d-flex align-items-center flex-wrap",children:s.map((function(t,n){return(0,p.jsxs)("div",{className:"badge bg-secondary text-gray-800 rounded-pill border me-2 mb-2",children:[(0,p.jsx)("span",{className:"text-break",style:{whiteSpace:"normal"},children:t}),(0,p.jsx)("button",{className:"btn btn-sm p-0 ms-1",onClick:e.onClickToRemoveTag(n),children:(0,p.jsx)("i",{className:"ri-close-line icon-7"})})]},t.toString())}))})})})]})]}),(0,p.jsx)("div",{className:"d-flex alert alert-info",children:(0,p.jsx)("div",{className:"d-flex flex-column flex-stack flex-grow-1",children:(0,p.jsx)("p",{className:"mb-0 text-gray-800",children:"Tags will help you improve content filtering."})})})]})}),(0,p.jsx)(c.Z.Footer,{className:"p-3",children:(0,p.jsxs)("div",{className:"mx-xl-4 px-2 px-lg-4 mx-0",children:[(0,p.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm btn-min-w me-3",onClick:this.handleClose,children:"Cancel"}),(0,p.jsx)("button",{type:"button",className:"btn btn-primary btn-sm btn-min-w ".concat(r?"spinner":""),onClick:this.onClickToSave,children:"Save"})]})})]}):null}}]),n}(l.Component);t.default=(0,r.$j)((function(e){return{tagList:e.tags.tagList}}),(function(e){return{postAddTag:function(t,n){return e((0,g._)(t,n))},AddTagAll:function(t,n){return e((0,u._g)(t,n))},loadAssetsDataWithDispatch:function(){return e((0,u.oF)())}}}))(m)},86836:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(87462),i=n(72791),s=n(60474),o=n(8003),l=n(1413),r=n(93433),c=n(45987),d=n(74999),g=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),i=String(n.getOptionValue(t)).toLowerCase(),s=String(n.getOptionLabel(t)).toLowerCase();return i===a||s===a},p={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n,a){return!(!e||t.some((function(t){return u(e,t,a)}))||n.some((function(t){return u(e,t,a)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}};n(54164),n(51672);var m=(0,i.forwardRef)((function(e,t){var n=function(e){var t=e.allowCreateWhileLoading,n=void 0!==t&&t,a=e.createOptionPosition,o=void 0===a?"last":a,u=e.formatCreateLabel,m=void 0===u?p.formatCreateLabel:u,h=e.isValidNewOption,f=void 0===h?p.isValidNewOption:h,v=e.getNewOptionData,x=void 0===v?p.getNewOptionData:v,b=e.onCreateOption,w=e.options,N=void 0===w?[]:w,j=e.onChange,C=(0,c.Z)(e,g),S=C.getOptionValue,T=void 0===S?s.g:S,O=C.getOptionLabel,k=void 0===O?s.b:O,y=C.inputValue,L=C.isLoading,A=C.isMulti,Z=C.value,D=C.name,_=(0,i.useMemo)((function(){return f(y,(0,d.I)(Z),N,{getOptionValue:T,getOptionLabel:k})?x(y,m(y)):void 0}),[m,x,k,T,y,f,N,Z]),V=(0,i.useMemo)((function(){return!n&&L||!_?N:"first"===o?[_].concat((0,r.Z)(N)):[].concat((0,r.Z)(N),[_])}),[n,o,L,_,N]),M=(0,i.useCallback)((function(e,t){if("select-option"!==t.action)return j(e,t);var n=Array.isArray(e)?e:[e];if(n[n.length-1]!==_)j(e,t);else if(b)b(y);else{var a=x(y,y),i={action:"create-option",name:D,option:a};j((0,d.D)(A,[].concat((0,r.Z)((0,d.I)(Z)),[a]),a),i)}}),[x,y,A,D,_,b,j,Z]);return(0,l.Z)((0,l.Z)({},C),{},{options:V,onChange:M})}((0,o.u)(e));return i.createElement(s.S,(0,a.Z)({ref:t},n))}))}}]);
//# sourceMappingURL=9730.eb623fe4.chunk.js.map