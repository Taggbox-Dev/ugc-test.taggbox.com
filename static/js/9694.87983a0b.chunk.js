"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[9694],{59694:function(e,t,n){n.r(t);var a=n(1413),o=n(15671),s=n(43144),c=n(97326),i=n(60136),l=n(29388),r=n(72791),u=n(9085),d=n(88890),m=n.n(d),p=n(78687),h=n(64802),g=n.n(h),f=n(72426),y=n.n(f),k=n(74342),b=n(44533),v=n(56600),S=n(50732),x=n(34361),C=n(94111),w=n(32174),A=n(8663),j=n(5964),U=n(68829),_=n(88933),N=n(6697),I=n(53841),Z=n(78027),R=n(80184),F=r.lazy((function(){return n.e(5217).then(n.bind(n,5217))})),T=r.lazy((function(){return n.e(431).then(n.bind(n,70431))})),D=r.lazy((function(){return n.e(6293).then(n.bind(n,6293))})),V=r.lazy((function(){return n.e(3422).then(n.bind(n,53422))})),L=r.lazy((function(){return n.e(508).then(n.bind(n,90508))})),q=r.lazy((function(){return n.e(5304).then(n.bind(n,5304))})),O={uppyKey:"0701d3d7f8d94e92a65a9cba388b1d96",uppyBucket:"cloud.taggbox.com",uppyAwsKey:"47ABVORKG52UYE1KB28S",uppyAwsSecret:"pcaTfeokaz28geAAns08H3yaGbOVz6ILgTptu19v",companionUrl:A.$r?"https://app.taggbox.com":"https://test.taggbox.com"},K=w.oc?window:new BroadcastChannel("connect"),E=function(e){(0,i.Z)(n,e);var t=(0,l.Z)(n);function n(e){var s;return(0,o.Z)(this,n),(s=t.call(this,e)).state={step:1,client_logo:null,client_logo_name:null,comment:"We loved your creative brilliance! Can we showcase your incredible work and give you the recognition you deserve? \u2728\ud83d\udcf8\ud83d\ude4c. Please approve our request so we can use your content in our marketing campaign.",lastComment:"We loved your creative brilliance! Can we showcase your incredible work and give you the recognition you deserve? \u2728\ud83d\udcf8\ud83d\ude4c. Please approve our request so we can use your content in our marketing campaign.",tncName:"TermsAndConditions.docx",tncUrl:"TermsAndConditions.docx",tnc:!1,logoModal:!1,fileModal:!1,activeKey:"ugc-socialAccount",connectedAccount:null,commentError:null,tncUrlError:null,tncError:null,requestedRespone:null,rightsVia:"",accountList:[],selectedAccount:null,hashValue:"yes",requested:!1,isRequesting:!1,uploadType:"Upload",validUrl:!0,validUrlError:!1},s.clickUploadType=function(e){return function(t){s.setState({uploadType:e,tncName:"",tncUrl:""})}},s.onClickToChange=function(e){return function(t){if(1==s.state.step)s.state.rightsVia&&String(s.state.rightsVia).length>0?s.setState({step:e,activeKey:"ugc-genralRequest"}):u.Am.error("Please select the mode for Right Request",{autoClose:2e3});else if(2==s.state.step){if("viaDM"==s.state.rightsVia)s.state.comment&&s.state.tncUrl&&s.state.tnc&&("Url"==s.state.uploadType&&s.state.validUrl||"Upload"==s.state.uploadType)?s.onClicktoSendRequest({step:e,activeKey:"ugc-copyUrl"}):(s.state.comment&&0!=String(s.state.comment).length||s.setState({commentError:!0}),s.state.tncUrl||"Upload"!=s.state.uploadType||s.setState({tncUrlError:!0}),s.state.tnc||s.setState({tncError:!0}),s.state.validUrl||s.setState({validUrlError:!0}),s.state.tncUrl||"Url"!=s.state.uploadType||s.setState({validUrlError:!0}));else if("viaComments"==s.state.rightsVia){s.state.selectedAccount;s.state.comment?s.setState({comment:"".concat(s.state.comment," Just reply with #").concat(s.state.hashValue,"  if you're up for it, and you can find all the nitty-gritty details in our bio. Thanks a bunch!")},(function(){return s.setState({step:e,activeKey:"ugc-copyUrl"})})):s.state.comment&&0!=String(s.state.comment).length||s.setState({commentError:!0})}}else s.state.step}},s.onClickToRemoveLogo=function(e){return s.setState({client_logo:null,client_logo_name:null})},s.readAuthenticationCode=function(e){var t=JSON.parse(e.data),n=t.data,a=t.networkId;"social-account"==t.type&&(0,Z.a2)(a,n,(function(){s.onLoadAddAccount()}),0,0)},s.onChangeTncUrl=function(e){s.setState({tncName:"CustomUrlType",tncUrl:e.target.value,selectedFile:e.target.value,filename:e.target.value,selected:e.target.value,validUrl:(0,w.K2)(String(e.target.value)),validUrlError:!(0,w.K2)(String(e.target.value))})},s.onLoadAddAccount=function(){var e=(0,c.Z)(s);(0,U.Vo)().then((function(t){var n=t.data.responseData,o=e.props.modalAssetData;if(n&&n.length>0){var c=n.filter((function(e){if(e.Network.id==o.networkId&&3!=e.ConnectedAccounts.api&&4!=e.ConnectedAccounts.api)return String(e.Network.name).includes("Instagram")?e:e.Network.id==o.networkId})),i=[];c.map((function(e){e.ConnectedAccounts.child.map((function(t){i.push((0,a.Z)((0,a.Z)({},e),{},{userName:t.ConnectedAccounts.value2}))}))})),e.setState({accountList:i,selectedAccount:i[0]},(function(){var e=s.state,t=e.comment,n=e.selectedAccount;if("viaComments"==e.rightsVia){var a=t.match(/@([^@\s]+)/g);if(n)if(a){var o=a.map((function(e){return e.replace("@","")}));o&&o.length>0&&o.filter((function(e){return"@".concat(e)==a[0]})).length>0&&(t=t.replace("".concat(a[0]),"@".concat(n.userName)),s.setState({comment:t}))}else t&&String(t).includes("@")&&(t=t.replace("".concat(a[0]),"@".concat(n.userName)),s.setState({comment:t}))}}))}})).catch((function(e){return u.Am.error("Api failed")}))},s.onLoadLastRequestData=function(){var e=(0,c.Z)(s);(0,x.mO)().then((function(t){var n=t.data.result,o={},s={},c={};n.client_logo&&String(n.client_logo).length>0&&(o={client_logo:n.client_logo}),n.custom_message&&String(n.custom_message).length>0&&(s={comment:n.custom_message,lastComment:n.custom_message}),n.custom_term_type&&String(n.custom_term_type).length>0&&(c="CustomUrlType"==n.custom_term_type?{tncName:n.custom_term_type,tncUrl:n.custom_terms,uploadType:"Url"}:{tncName:n.custom_term_type,tncUrl:n.custom_terms}),e.setState((0,a.Z)((0,a.Z)((0,a.Z)({},o),s),c))})).catch((function(e){return u.Am.error("Api failed")}))},s.onClickClearFile=function(e){s.setState({tncName:"",tncUrl:""})},s.termsFileDownload=function(){g().saveAs((0,v.F)("media/downloads/Terms&ConditionsforuseofUGC.docx"),"Terms&ConditionsforuseofUGC.docx")},s.modalClose=function(e){return function(t){2==e?s.setState({step:1,activeKey:"ugc-socialAccount"}):s.props.modalClose(!1)}},s.onChangeComment=function(e){return s.setState({comment:e.target.value})},s.onClicktnc=function(e){var t=s.state.tnc;s.setState({tnc:!t,tncError:null})},s.onLogoClose=function(e){s.uppy.cancelAll(),s.setState({logoModal:!1})},s.onLogoOpen=function(e){return s.setState({logoModal:!0},(function(){m()(".uppy-Dashboard-close").click((function(){s.uppy.cancelAll(),s.setState({logoModal:!1})}))}))},s.onFileOpen=function(e){s.setState({fileModal:!0},(function(){m()(".uppy-Dashboard-close").click((function(){s.uppyPostEdit.cancelAll(),s.setState({fileModal:!1})}))}))},s.onFileClose=function(){s.uppyPostEdit.cancelAll(),s.setState({fileModal:!1})},s.onSelected=function(e){s.setState({activeKey:e})},s.sendNow=function(e){var t=s.props,n=t.modalAssetData,o=t.isBulkStatus,i=t.bulkRightsData,l=s.state,r=l.comment,d=l.tncUrl,m=l.tncName,p=l.client_logo,h=l.connectedAccount,g=l.rightsVia,f=l.selectedAccount,y=l.hashValue;if(l.requested)u.Am.error("Already rights raise requested.",{autoClose:2e3});else{var k={};h&&h.data.length>0&&(k=h.data[0]);var b=(0,c.Z)(s),v=[];o?i.map((function(e){v.push((0,a.Z)((0,a.Z)({referenceId:e.referenceId,username:e.username,media:e.publishImage,video:(0,w.me)(e.mediaFile)},k),{},{link:e.link,author:e.picture,postId:e.postId,collection:e.collection}))})):v.push((0,a.Z)((0,a.Z)({referenceId:n.referenceId,username:n.username,media:n.publishImage,video:(0,w.me)(n.mediaFile)},k),{},{link:n.link,author:n.picture,postId:n.postId,collection:n.collection}));var S={feedId:n.feedId,custom_message:r,networkId:n.networkId,brandlink:p||"",handle:f&&Object.keys(f).length>0&&f.userName?f.userName:"",hashtag:y,termslink:d,custom_term_type:m,assets:v,rightsVia:"viaComments"==g?1:0};s.setState({isRequesting:!0}),(0,x.mL)(S).then((function(e){b.setState({requested:!0,isRequesting:!1}),b.props.loadAssetsDataWithDispatch(),navigator.clipboard.writeText(r),setTimeout((function(){return window.open(n.link,"_blank")}),400)}))}},s.onClicktoSendRequest=function(e){var t=s.props,n=t.modalAssetData,o=t.isBulkStatus,i=t.bulkRightsData,l=s.state,r=l.comment,d=l.tncUrl,m=l.tncName,p=l.client_logo,h=l.connectedAccount,g=l.rightsVia,f=l.selectedAccount,y=l.hashValue,k={};h&&h.data.length>0&&(k=h.data[0]);var b=(0,c.Z)(s),v=[];o?i.map((function(e){v.push((0,a.Z)((0,a.Z)({referenceId:e.referenceId,username:e.username,media:e.publishImage,video:(0,w.me)(e.mediaFile)},k),{},{link:e.link,author:e.picture,postId:e.postId,collection:e.collection}))})):v.push((0,a.Z)((0,a.Z)({referenceId:n.referenceId,username:n.username,media:n.publishImage,video:(0,w.me)(n.mediaFile)},k),{},{link:n.link,author:n.picture,postId:n.postId,collection:n.collection}));var S={feedId:n.feedId,custom_message:r,networkId:n.networkId,brandlink:p||"",handle:f&&Object.keys(f).length>0&&f.userName?f.userName:"",hashtag:y,termslink:d,custom_term_type:m,assets:v,rightsVia:"viaComments"==g?1:0};s.setState({isRequesting:!0}),(0,x.mL)(S).then((function(t){b.props.loadAssetsDataWithDispatch(),"viaDM"==g&&(0,j.i)(n.link).then((function(o){var s=o.data.data;navigator.clipboard.writeText(r+" Post : "+s.tiny_url+" Form Link : "+t.data.bitlylink),18==n.networkId||2==n.networkId?setTimeout((function(){return window.open("https://ig.me/m/".concat(n.username),"_blank")}),400):setTimeout((function(){return window.open(s.tiny_url,"_blank")}),400),b.setState((0,a.Z)((0,a.Z)({requestedRespone:t.data},e),{},{isRequesting:!1}))})).catch((function(o){navigator.clipboard.writeText(r+" Post : "+n.link+" Form Link : "+t.data.bitlylink),18==n.networkId||2==n.networkId?setTimeout((function(){return window.open("https://ig.me/m/".concat(n.username),"_blank")}),400):setTimeout((function(){return window.open(n.link,"_blank")}),400),b.setState((0,a.Z)((0,a.Z)({requestedRespone:t.data},e),{},{isRequesting:!1}))}))})).catch((function(e){return u.Am.error("Api failed")}))},s.onUpdateData=function(e,t){s.setState({connectedAccount:{provider:e,data:t}})},s.rightsViaOption=function(e){s.setState({rightsVia:e,comment:"viaComments"==e?"Hey there! \ud83d\ude04 We stumbled upon this amazing post of yours, and all we could say was, \"WOW.\" We want to share this post with our community.\n            We'd be absolutely thrilled if you'd let us feature your photo on our website and social media. It's all about celebrating your talent! \ud83c\udf1f\n    ":s.state.lastComment})},s.onChangeSelectedAccount=function(e){return function(t){var n=s.state,a=n.comment,o=n.selectedAccount,c=a.match(/@([^@\s]+)/g);if(e)if(c){var i=c.map((function(e){return e.replace("@","")}));i&&i.length>0&&i.filter((function(e){return e==o.userName})).length>0&&(a=a.replace("@".concat(o.userName),"@".concat(e.userName)))}else a&&String(a).includes("@")&&(a=a.replace("@".concat(o.userName),"@".concat(e.userName)));s.setState({selectedAccount:(e&&Object.keys(e).length,e),comment:a},(function(){var e=s.state.selectedAccount,t=s.props.modalAssetData;null==e&&(0,w.m9)({id:t.networkId,name:(0,w.O5)(t.networkId)},"social-account")}))}},s.hashChange=function(e){var t=s.state,n=t.comment,a=t.hashValue,o=n.match(/#([^#\s]+)/g),c=e.target.value;if(c&&String(c))if(o){var i=o.map((function(e){return e.replace("#","")}));i&&i.length>0&&i.filter((function(e){return e==a})).length>0&&(n=n.replace("#".concat(a),"#".concat(String(c).trim())),s.setState({hashValue:String(c).trim(),comment:n}))}else n&&String(n).includes("#")&&(n=n.replace("#".concat(a),"#".concat(String(c).trim())),s.setState({hashValue:String(c).trim(),comment:n}))},s.uppy=new S.hS({debug:!0,autoProceed:!1,restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["image/*"]}}).use(_.ZP,{target:"#a",params:{auth:{key:O.uppyKey},steps:{store:{robot:"/wasabi/store",bucket_region:"us-west-1",bucket:O.uppyBucket,key:O.uppyAwsKey,secret:O.uppyAwsSecret,path:"postimage/${file.id}"}}},waitForEncoding:!0}).use(N.Z,{target:S.hS.Dashboard,companionUrl:O.companionUrl}).use(I.Z,{target:S.hS.Dashboard,companionUrl:O.companionUrl}),s.uppyPostEdit=new S.hS({debug:!0,autoProceed:!1,restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]}}).use(_.ZP,{target:"#a",params:{auth:{key:O.uppyKey},steps:{store:{robot:"/wasabi/store",bucket_region:"us-west-1",bucket:O.uppyBucket,key:O.uppyAwsKey,secret:O.uppyAwsSecret,path:"test/${file.id}"}}},waitForEncoding:!0}).use(N.Z,{target:S.hS.Dashboard,companionUrl:O.companionUrl}).use(I.Z,{target:S.hS.Dashboard,companionUrl:O.companionUrl}),s}return(0,s.Z)(n,[{key:"componentWillMount",value:function(){this.onLoadLastRequestData()}},{key:"componentDidMount",value:function(){var e=this;this.uppyPostEdit.on("transloadit:result",(function(t,n){var a=n.url.split("/"),o=(a[a.length-1],e.state),s=o.tncName,c=o.tncUrl;c=n.id,s=n.name,e.setState({tncName:s,tncUrl:c,selectedFile:n.id,filename:"https://cloud.taggbox.com/test/".concat(n.id),selected:"https://cloud.taggbox.com/test/".concat(n.id)},(function(){setTimeout((function(){e.uppyPostEdit.cancelAll(),e.setState({fileModal:!1})}),300)}))})),this.uppy.on("transloadit:result",(function(t,n){var a=e.state,o=a.client_logo,s=a.client_logo_name;o="https://cloud.taggbox.com/postimage/".concat(n.id),s=n.name,e.setState({client_logo:o,client_logo_name:s,selectedlogoFile:n.id,logofilename:"https://cloud.taggbox.com/postimage/".concat(n.id),logoselected:"https://cloud.taggbox.com/postimage/".concat(n.id)},(function(){setTimeout((function(){e.uppy.cancelAll(),e.setState({logoModal:!1})}),300)}))})),K.addEventListener("message",this.readAuthenticationCode),this.onLoadAddAccount()}},{key:"componentWillUnmount",value:function(){this.uppy.close(),K.removeEventListener("message",this.readAuthenticationCode)}},{key:"render",value:function(){var e=this,t=this.props.modalAssetData,n=this.state,a=n.step,o=n.activeKey,s=n.connectedAccount,c=n.requestedRespone,i=n.comment,l=n.rightsVia,u=n.accountList,d=n.selectedAccount,m=n.hashValue,p=n.isRequesting;return t&&Object.keys(t).length>0?(0,R.jsxs)("div",{className:"rights_modal_sidebar position-relative",children:[(0,R.jsx)("div",{className:"rights_modal_aside_wrap",children:null==t.ugcRights?(0,R.jsxs)(k.Z.Container,{activeKey:o,onSelect:this.onSelected,children:[(0,R.jsx)("div",{className:"ugc-wizard-nav",children:(0,R.jsxs)(b.Z,{variant:"nav",className:"bg-light justify-content-between row gx-0",children:[(0,R.jsx)(b.Z.Item,{className:"col-4",children:(0,R.jsxs)(b.Z.Link,{className:"py-3 py-xl-4 block-center ".concat(1==a||2==a||3==a?"active":""),eventKey:"ugc-socialAccount",onClick:function(t){return e.setState({step:1})},children:[(0,R.jsx)("span",{className:"d-flex me-1 text-success",children:(0,R.jsx)("i",{className:"ri-checkbox-circle-fill icon-5"})}),(0,R.jsx)("span",{className:"fw-bold text-nowrap",children:"Choose Method"})]})}),(0,R.jsx)(b.Z.Item,{className:"col-4",children:(0,R.jsxs)(b.Z.Link,{className:"py-3 py-xl-4 block-center ".concat(2==a||3==a?"active":"disabled"),eventKey:"ugc-genralRequest",children:[(0,R.jsxs)("span",{className:"d-flex me-1",children:[(0,R.jsx)("i",{className:"checkIcoFilled ri-checkbox-circle-fill icon-5 text-success"}),(0,R.jsx)("i",{className:"checkIco ri-checkbox-circle-line icon-5"})]}),(0,R.jsx)("span",{className:"fw-bold text-nowrap",children:"Generate Request"})]})}),(0,R.jsx)(b.Z.Item,{className:"col-4",children:(0,R.jsxs)(b.Z.Link,{className:"py-3 py-xl-4 block-center ".concat(3==a?"active":"disabled"),eventKey:"ugc-copyUrl",children:[(0,R.jsxs)("span",{className:"d-flex me-1",children:[(0,R.jsx)("i",{className:"checkIcoFilled ri-checkbox-circle-fill icon-5 text-success"}),(0,R.jsx)("i",{className:"checkIco ri-checkbox-circle-line icon-5"})]}),(0,R.jsx)("span",{className:"fw-bold text-nowrap",children:"Preview"})]})})]})}),(0,R.jsxs)(k.Z.Content,{children:[(0,R.jsx)(k.Z.Pane,{eventKey:"ugc-socialAccount",children:(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(T,{modalAssetData:t,onUpdateData:this.onUpdateData,connectedAccount:s,rightsViaOption:this.rightsViaOption,rightsVia:l})})}),(0,R.jsx)(k.Z.Pane,{eventKey:"ugc-genralRequest",children:(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(F,{state:this.state,onChangeComment:this.onChangeComment,onClicktnc:this.onClicktnc,onClickClearFile:this.onClickClearFile,uppyPostEdit:this.uppyPostEdit,uppy:this.uppy,onLogoClose:this.onLogoClose,onLogoOpen:this.onLogoOpen,onClickToRemoveLogo:this.onClickToRemoveLogo,onFileOpen:this.onFileOpen,onFileClose:this.onFileClose,rightsVia:l,onChangeTncUrl:this.onChangeTncUrl,clickUploadType:this.clickUploadType})})}),(0,R.jsx)(k.Z.Pane,{eventKey:"ugc-copyUrl",children:(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(D,{modalAssetData:t,requestedRespone:c,comment:i,rightsVia:l,accountList:u,selectedAccount:d,onChangeSelectedAccount:this.onChangeSelectedAccount,hashValue:m,hashChange:this.hashChange,sendNow:this.sendNow,isRequesting:p,onChangeComment:this.onChangeComment},o)})})]})]}):t.ugcRights&&Object.keys(t.ugcRights).length>0&&1==t.ugcRights.status?(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(V,{days:parseInt(30)-(parseInt(parseInt(y()().diff(y()(t.ugcRights.created),"days")))+parseInt(1)),expireStatus:!0,modalAssetData:t})}):t.ugcRights&&Object.keys(t.ugcRights).length>0&&2==t.ugcRights.status?(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(L,{modalAssetData:t})}):t.ugcRights&&Object.keys(t.ugcRights).length>0&&3==t.ugcRights.status?(0,R.jsx)(r.Suspense,{fallback:(0,R.jsx)(R.Fragment,{}),children:(0,R.jsx)(q,{modalAssetData:t,onUpdateRejectedRightDetail:this.props.onUpdateRejectedRightDetail})}):null}),null==t.ugcRights?(0,R.jsxs)("div",{className:"rights_modal_actions text-center modal-footer w-100",children:[1==a||2==a?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{type:"button",className:"btn btn-secondary me-2",onClick:this.modalClose(a),children:1==a?"Cancel":2==a?"Back":""}),(0,R.jsx)("button",{type:"button",className:"btn btn-primary ".concat(p?"spinner disabled":""),onClick:this.onClickToChange(1==a?2:2==a?3:4),children:"Next Step"})]}):null,3==a?(0,R.jsx)("button",{type:"button",className:"btn btn-secondary me-2",onClick:this.modalClose(a),children:"Done"}):null]}):null]}):null}}]),n}(r.Component);t.default=(0,p.$j)((function(e){return{}}),(function(e){return{loadAssetsDataWithDispatch:function(){return e((0,C.oF)())}}}))(E)},5964:function(e,t,n){n.d(t,{i:function(){return s}});var a=n(63263),o=n(8663),s=function(e){var t=JSON.stringify({url:e}),n={method:"post",url:"".concat(o.wJ,"?api_token=").concat("YhhvoiyS1HLShf3CsiZAUsUZK2qTY1JGrJ045Z12sipRKGeEbM1FVHnQVd4f"),headers:{accept:"application/json","Content-Type":"application/json"},data:t};return(0,a.Z)(n)}}}]);
//# sourceMappingURL=9694.87983a0b.chunk.js.map