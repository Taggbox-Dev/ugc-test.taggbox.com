"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[2644,3609],{92644:function(e,t,n){n.r(t);var o=n(15671),s=n(43144),i=n(97326),l=n(60136),a=n(29388),c=n(72791),r=n(11087),u=n(43360),p=n(23794),d=n(56600),h=(n(73609),n(94111)),f=n(80184),g=function(e){(0,l.Z)(n,e);var t=(0,a.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var s=arguments.length,l=new Array(s),a=0;a<s;a++)l[a]=arguments[a];return(e=t.call.apply(t,[this].concat(l))).state={active:null,activeAction:null},e.changeFilter=function(t){return function(n){return e.setState({activeAction:t})}},e.onClickToEdit=function(t,n){return function(o){var s=(0,i.Z)(e);e.setState({activeAction:n}),(0,h.FN)(t.id).then((function(e){var t=e.data,n=t.publishCode,o=t.assestCount;s.props.onUpdateReponseData({assestCount:o,publishCode:n})})).catch((function(e){s.props.onUpdateReponseData({assestCount:0,publishCode:t})}))}},e}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.state,n=this.state.activeAction,o=Array.from({length:8},(function(e,t){return t+1}));return(0,f.jsx)("div",{className:"filter_list_wrapper",onChange:function(t){return e.embedCodeCallback(t)},children:(0,f.jsx)("div",{className:"filter_list",children:t.collectionList.length>0&&t.publishList.length>0?t.publishList.map((function(t,o){return(0,f.jsxs)("div",{className:"d-flex rounded-1 mb-3 overflow-hidden border ".concat(n==o?"border-dark":"bg-light border-light"),onClick:e.onClickToEdit(t,o),children:[(0,f.jsxs)("div",{className:"d-flex p-3 pe-0 cursor-pointer overflow-hidden flex-grow-1",children:[(0,f.jsx)("span",{className:"svg-icon svg-icon-2 flex-shrink-0 me-2 block-center d-flex text-gray-700",children:(0,f.jsx)(p.Z,{src:(0,d.F)("media/icons/svg-icons/widget.svg"),height:32,width:32})}),(0,f.jsxs)("div",{className:"d-flex flex-column flex-grow-1 overflow-hidden",children:[(0,f.jsx)("p",{className:"fs-9 mb-0 fw-medium text-ellipsis",children:t.name}),(0,f.jsxs)("span",{className:"text-muted fs-9",children:["Wall :",t.wallId]})]})]}),(0,f.jsxs)("div",{className:"block-center flex-shrink-0 p-3 ps-0",children:[(0,f.jsx)(r.rU,{className:"btn btn-icon btn-active-light p-0 w-26px h-26px transition-none border-0",to:"/web-embed/edit/".concat(t.id),children:(0,f.jsx)("i",{className:"ri-edit-box-line icon-7"})}),(0,f.jsx)(u.Z,{variant:"icon",className:"btn-active-light p-0 w-26px h-26px transition-none border-0",onClick:e.props.onClickToDelete({id:t.id}),children:(0,f.jsx)("i",{className:"ri-delete-bin-line icon-7"})})]})]},o)})):o.map((function(e,t){return(0,f.jsx)("div",{className:"sk_rect h-54px mb-3"},t)}))})})}}]),n}(c.Component);t.default=g},73609:function(e,t,n){n.r(t);var o=n(1413),s=n(15671),i=n(43144),l=n(97326),a=n(60136),c=n(29388),r=n(72791),u=n(9085),p=n(21830),d=n.n(p),h=n(78687),f=n(46305),g=n(32002),m=n(80184),C=r.lazy((function(){return n.e(8923).then(n.bind(n,38923))})),S=r.lazy((function(){return n.e(3566).then(n.bind(n,53566))})),y=r.lazy((function(){return n.e(6106).then(n.bind(n,86106))})),v=r.lazy((function(){return n.e(2835).then(n.bind(n,32835))})),A=r.lazy((function(){return n.e(1013).then(n.bind(n,61013))})),b=r.lazy((function(){return n.e(4464).then(n.bind(n,74464))})),k=r.lazy((function(){return Promise.all([n.e(2145),n.e(8063)]).then(n.bind(n,48063))})),w=function(e){var t={};return e&&String(e).length>0&&String(e).split(",").map((function(e){t[e]=!0})),t},x=function(e){var t=[];return e&&String(e).length>0&&String(e).split(",").map((function(e){t.push(e)})),t},j=function(e){var t={};return e&&String(e).length>0&&(String(e).includes("2,4")?t["2,4"]=!0:String(e).includes("3,5")&&(t["3,5"]=!0),String(e).includes("1")&&(t[1]=!0)),t},L=function(e,t,n,o,s,i){var l={};return e&&(l.assetsType=!0),t&&(l.collection=!0),n&&(l.connection=!0),o&&(l.source=!0),s&&(l.tags=!0),i&&(l.ugcrights=!0),l},D=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;(0,s.Z)(this,n),(i=t.call(this,e)).timeout=0,i.onClickToDelete=function(e){return function(t){d().fire({title:"Are you sure?",text:"You want to delete this",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then((function(t){if(t.isConfirmed){var n=(0,l.Z)(i);(0,g.bD)(e).then((function(e){n.onLoadPublish(),u.Am.success("Your widget has been deleted.")}))}}))}},i.onTagApply=function(e){var t=i.state.tagApply;t.push(e),i.setState({tagApply:t})},i.onTagRemove=function(e){return function(t){var n=i.state.tagApply;n.splice(e,1),i.setState({tagApply:n})}},i.conditionApply=function(e){return function(t){i.setState({condition:e})}},i.filterApply=function(e){return function(t){var n=i.state.chooseFilter,s={};n[e]?(delete n[e],"collection"==e&&(s={selectedCollection:{}}),"source"==e&&(s={selectedNetwork:{}}),"assetsType"==e&&(s={assetsApply:{}}),"tags"==e&&(s={tagApply:[]}),"ugcrights"==e&&(s={ugcRigths:{}}),"connection"==e&&(s={selectedConnection:{}}),i.setState((0,o.Z)({chooseFilter:n,activeKey:""},s))):(n[e]=!0,i.setState({chooseFilter:n,activeKey:e}))}},i.onSelectActive=function(e){return function(t){i.setState({activeKey:i.state.activeKey==e?"":e})}},i.shareEmbedModal=function(e){return i.setState({showGenratedCode:!0})},i.genratedCodeCallback=function(e){i.setState({showGenratedCode:e})},i.renderSwitch=function(e){var t=i.state.responseData;switch(e){case"p-html":default:return(0,m.jsx)(C,{data:t});case"p-wordpress":return(0,m.jsx)(S,{data:t});case"p-wix":return(0,m.jsx)(y,{data:t});case"p-squarespace":return(0,m.jsx)(v,{data:t});case"p-shopify":return(0,m.jsx)(A,{data:t});case"p-other":return(0,m.jsx)(b,{data:t})}},i.onSelectTemplate=function(e){return i.setState({selectedTemplate:e})},i.onUgcRigths=function(e){return function(t){var n=i.state.ugcRigths;n[e]?(delete n[e],i.setState({ugcRigths:n})):(n[e]=!0,i.setState({ugcRigths:n}))}},i.onSelectAllUgcRigths=function(e){var t=i.state.ugcRigths;t&&Object.keys(t).length>=3?i.setState({ugcRigths:{}}):i.setState({ugcRigths:{1:!0,2:!0,3:!0}})},i.onconnectionApply=function(e){return function(t){var n=i.state.selectedConnection;n[e]?(delete n[e],i.setState({selectedConnection:n})):(n[e]=!0,i.setState({selectedConnection:n}))}},i.onConnectionSelectAll=function(e){var t=i.state,n=t.selectedConnection,o=t.feedData;if(n&&Object.keys(n).length>=o.length)i.setState({selectedConnection:{}});else{var s={};o.map((function(e){s[e.feedId]=!0})),i.setState({selectedConnection:s})}},i.onConnectionSearchFilter=function(e){var t=e.target.value;i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout((function(){i.setState({textConnectionSearch:t?String(t).toLowerCase():t},(function(){return i.onLoadConnectionFilterData()}))}),1e3)},i.onLoadConnectionFilterData=function(){var e=i.props.feedData,t=i.state.textConnectionSearch,n=e.filter((function(e){return String(e.name).toLowerCase().includes(t)}));i.setState({feedData:n})},i.onAssetsApply=function(e){return function(t){var n=i.state.assetsApply;n[e]?(delete n[e],i.setState({assetsApply:n})):(n[e]=!0,i.setState({assetsApply:n}))}},i.onSelectAllAssetsApply=function(e){var t=i.state.assetsApply;t&&Object.keys(t).length>=3?i.setState({assetsApply:{}}):i.setState({assetsApply:{1:!0,"2,4":!0,"3,5":!0}})},i.onNetworkApply=function(e){return function(t){var n=i.state.selectedNetwork;n[e]?(delete n[e],i.setState({selectedNetwork:n})):(n[e]=!0,i.setState({selectedNetwork:n}))}},i.onClickSelectAll=function(e){var t=i.state,n=t.selectedNetwork,o=t.networkData;if(n&&Object.keys(n).length>=o.length)i.setState({selectedNetwork:{}});else{var s={};o.map((function(e){s[e.id]=!0})),i.setState({selectedNetwork:s})}},i.onSearchFilter=function(e){var t=e.target.value;i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout((function(){i.setState({textSearch:t?String(t).toLowerCase():t},(function(){return i.onLoadFilterData()}))}),1e3)},i.onLoadFilterData=function(){var e=i.props.networks,t=i.state.textSearch,n=e.filter((function(e){return String(e.name).toLowerCase().includes(t)}));i.setState({networkData:n})},i.onLoadCollectionList=function(){var e=(0,l.Z)(i),t=i.props.collectionData;t&&Object.keys(t).length>0&&t.collectionList.length>0?e.setState({collectionList:t.collectionList,collectionCompleteList:t.collectionList,assetsCount:t.assetsCount}):(0,f.M1)().then((function(t){var n=t.data.responseData;n&&Object.keys(n).length>0&&e.setState({collectionList:n.collection,collectionCompleteList:n.collection})})).catch((function(e){}))},i.onCollectionApply=function(e){return function(t){var n=i.state.selectedCollection;n[e]?(delete n[e],i.setState({selectedCollection:n})):(n[e]=!0,i.setState({selectedCollection:n}))}},i.onCollectionSelectAll=function(e){var t=i.state,n=t.selectedCollection,o=t.collectionList;if(n&&Object.keys(n).length>=o.length)i.setState({selectedCollection:{}});else{var s={};o.map((function(e){s[e.id]=!0})),i.setState({selectedCollection:s})}},i.onCollectionSearchFilter=function(e){var t=e.target.value;i.timeout&&clearTimeout(i.timeout),i.timeout=setTimeout((function(){i.setState({collectionSearch:t?String(t).toLowerCase():t},(function(){return i.onLoadCollectionFilterData()}))}),1e3)},i.onLoadCollectionFilterData=function(){var e=i.state,t=e.collectionSearch,n=e.collectionCompleteList.filter((function(e){return String(e.name).toLowerCase().includes(t)}));i.setState({collectionList:n})},i.onChangeName=function(e){i.setState({publishCodeName:e.target.value})},i.onRequestPublish=function(e){var t=i.state,n=t.id,o=t.selectedTemplate,s=t.selectedCollection,a=t.selectedConnection,c=t.selectedNetwork,r=t.condition,p=t.showGenratedCode,d=t.ugcRigths,h=t.assetsApply,f=t.publishCodeName,m=t.tagApply,C=(0,l.Z)(i),S=[],y="",v=[],A=[],b=[],k=[],w=[];if(d&&Object.keys(d).length>0&&Object.keys(d).map((function(e){w.push(e)})),o&&Object.keys(o).length>0&&o.id&&(y=o.id),c&&Object.keys(c).length>0&&Object.keys(c).map((function(e){k.push(e)})),s&&Object.keys(s).length>0&&Object.keys(s).map((function(e){S.push(e)})),a&&Object.keys(a).length>0&&Object.keys(a).map((function(e){v.push(e)})),h&&Object.keys(h).length>0&&Object.keys(h).map((function(e){A.push(e)})),m&&m.length>0&&(b=m),o&&Object.keys(o).length>0&&o.id&&(S.length>0||v.length>0||b.length>0||A.length>0||w.length>0||k.length>0)){var x={id:n,name:f,template:y,collection:S.join(","),source:v.join(","),assets_type:A.join(","),tags:b.join(","),ugc_status:w.join(","),publish_type:1,campaign_type:"",screen_type:"",platform:p||"",network:k.join(","),filterType:String(r).toUpperCase()};i.setState({isUpdating:!0}),(0,g.S5)(x).then((function(e){var t=e.data,n=t.status,o=(t.response_code,t.response_message);"success"==n?(u.Am.success("Publish widget successfully updated."),C.setState({isUpdating:!1})):C.setState({isUpdating:!1},(function(){return u.Am.error(o)}))})).catch((function(e){var t=e.response.data;C.setState({isUpdating:!1},(function(){return u.Am.error(t.message)}))}))}else o?u.Am.error("Please select filter.",{autoClose:3e3}):u.Am.error("Please select template.",{autoClose:3e3})},i.onResetFilter=function(e){i.setState({showGenratedCode:"p-html",chooseFilter:{},collectionApply:[],sourceApply:{},assetsApply:{},tagApply:[],ugcRigths:{},selectedTemplate:null,condition:"and",selectedNetwork:{},selectedConnection:{},textSearch:"",textConnectionSearch:"",selectedCollection:{},collectionSearch:"",genrateCode:!1,responseData:null,activeFilter:null,publishCodeName:"",isUpdating:!1})};var a=e.item,c=e.templeteList,r={};if(c&&c.length>0){var p=c.filter((function(e){return e.id==a.template}));r=p&&p.length>0?p[0]:{id:a.template}}else r={id:a.template};return i.state={showGenratedCode:a.platform?a.platform:"p-html",chooseFilter:L(a.assets_type,a.collection,a.source,a.network,a.tags,a.ugc_status),collectionApply:[],sourceApply:{},assetsApply:j(a.assets_type),tagApply:x(a.tags),ugcRigths:{},selectedTemplate:r,condition:String(a.filterType).toLowerCase(),networkData:[],feedData:[],selectedNetwork:w(a.network),selectedConnection:w(a.source),textSearch:"",textConnectionSearch:"",collectionList:[],collectionCompleteList:[],selectedCollection:w(a.collection),collectionSearch:"",genrateCode:!1,publishList:[],responseData:a,activeFilter:null,selectedWebEmbed:null,publishCodeName:a.name?a.name:"Untitled-1",id:a.id,isUpdating:!1},i}return(0,i.Z)(n,[{key:"componentWillMount",value:function(){this.onLoadCollectionList()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.networks,n=e.feedData;this.setState({networkData:t,feedData:n.feeds})}},{key:"componentWillReceiveProps",value:function(e){var t=e.networks,n=e.feedData;this.setState({networkData:t,feedData:n.feeds})}},{key:"render",value:function(){var e=this.state,t=e.showGenratedCode,n=(e.chooseFilter,e.genrateCode,e.responseData,e.activeFilter),o=this.props,s=(o.networks,o.history);return console.log("this.state",this.state),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(k,{genratedCodeCallback:this.genratedCodeCallback,genratedCodeModal:t,filterApply:this.filterApply,state:this.state,onSelectTemplate:this.onSelectTemplate,onSelectAllUgcRigths:this.onSelectAllUgcRigths,onUgcRigths:this.onUgcRigths,onTagRemove:this.onTagRemove,onTagApply:this.onTagApply,onAssetsApply:this.onAssetsApply,onconnectionApply:this.onconnectionApply,onSelectAllAssetsApply:this.onSelectAllAssetsApply,onNetworkApply:this.onNetworkApply,onClickSelectAll:this.onClickSelectAll,onSearchFilter:this.onSearchFilter,onCollectionSearchFilter:this.onCollectionSearchFilter,onCollectionSelectAll:this.onCollectionSelectAll,onCollectionApply:this.onCollectionApply,conditionApply:this.conditionApply,onConnectionSearchFilter:this.onConnectionSearchFilter,onConnectionSelectAll:this.onConnectionSelectAll,onClickToDelete:this.onClickToDelete,onResetFilter:this.onResetFilter,activeFilter:n,history:s,onChangeName:this.onChangeName,onUpdateReponseData:this.onUpdateReponseData,onLoadPublish:this.onLoadPublish,onSelectActive:this.onSelectActive,onRequestPublish:this.onRequestPublish,isPublishEdit:!0})})}}]),n}(r.Component);t.default=(0,h.$j)((function(e){return{networks:e.networks.networkData,feedData:e.feedData.filterList,collectionData:e.collection,templeteList:e.templates.templeteList}}))(D)}}]);
//# sourceMappingURL=2644.004bfeea.chunk.js.map