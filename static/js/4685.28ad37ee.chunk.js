"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[4685],{44685:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(15671),s=n(43144),o=n(97326),c=n(60136),i=n(29388),r=n(72791),d=n(21830),l=n.n(d),u=n(8663),h=n(56600),m=(n(84866),n(84682),n(32480)),p=n(80184),f=n(49907),k=n(7566),w=n(23544),g=n(25554),x=n(78027),b=n(32002),v=new BroadcastChannel("connect"),j=function(e){(0,c.Z)(n,e);var t=(0,i.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={connected:null,showConfirm:!1},e.readAuthenticationCode=function(t){var n=JSON.parse(t.data),a=n.data,s=n.networkId,c=n.type,i=(0,o.Z)(e);if("get-rights"==c){console.log("data, networkId, type",a,s,c);JSON.parse(t.data);var r=e.props.modalAssetData;2==r.networkId||18==r.networkId?(0,g.YK)(a,(function(t){(0,b.H$)({access_token:t.token}).then((function(t){var n=t.data,a=[];n&&Object.keys(n).length>0&&a.push({id:n.id,name:n.username,picture:(0,h.F)("media/icons/social-icons/".concat((0,m.O5)(r.networkId),".svg"))}),i.setState({access_token:n.token,socialData:t.data,accountsData:a},(function(){return e.props.onUpdateData("instagram",a)}))}))})):3==r.networkId?(0,g.XN)(a,s,(function(t){(0,b.pV)({access_token:t.token}).then((function(n){var a=n.data.pages,s=[];a&&a.length>0&&a.map((function(e){s.push({id:e.id,name:e.name,access_token:e.access_token,picture:(0,h.F)("media/icons/social-icons/".concat((0,m.O5)(r.networkId),".svg"))})})),i.setState({access_token:t.token,socialData:n.data,accountsData:s},(function(){return e.props.onUpdateData("facebook",s)}))}))})):(0,x.Jr)(a,s,(function(e){}))}},e.handleYes=function(t){e.setState({showConfirm:!0})},e.handleNo=function(t){e.setState({showConfirm:!0})},e.onClickSocialConnect=function(e){return function(t){e&&Object.keys(e).length>0&&l().fire({imageUrl:(0,h.F)("media/icons/social-icons-square/".concat((0,m.O5)(e.networkId),".svg")),imageHeight:40,imageWidth:40,title:"<strong>".concat((0,m.nX)((0,m.O5)(e.networkId)),"</strong>"),html:"Connect to ".concat((0,m.nX)((0,m.O5)(e.networkId))," and start collecting assets."),showCloseButton:!0,showCancelButton:!1,focusConfirm:!0,confirmButtonText:"Continue with ".concat((0,m.nX)((0,m.O5)(e.networkId))),confirmButtonAriaLabel:"Continue with ".concat((0,m.nX)((0,m.O5)(e.networkId)))}).then((function(t){if(t.isConfirmed)switch(localStorage.setItem("networkId",e.networkId),localStorage.setItem("connectionType","get-rights"),e.networkId){case 1:(0,w.oi)();break;case 6:(0,k.nY)(6);break;case 21:(0,w.$8)();break;case 11:(0,k.GC)(11);break;case 8:(0,w.ok)();break;case 3:(0,w.vr)(3);break;case 2:var n="https://api.instagram.com/oauth/authorize?client_id=".concat(u.yz,"&redirect_uri=").concat(u.XP,"/instagram/feeds/authCallback/&scope=user_profile,user_media&response_type=code");window.open(n,"_blank","width=786,height=786");break;case 18:var a="https://api.instagram.com/oauth/authorize?client_id=".concat(u.yz,"&redirect_uri=").concat(u.XP,"/instagram/feeds/authCallback/&scope=user_profile,user_media&response_type=code");window.open(a,"_blank","width=786,height=786")}}))}},e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){v.addEventListener("message",this.readAuthenticationCode)}},{key:"componentWillUnmount",value:function(){v.removeEventListener("message",this.readAuthenticationCode)}},{key:"render",value:function(){this.state.showConfirm;var e=this.props,t=e.modalAssetData,n=e.connectedAccount;return(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"p-lg-6 p-3",children:(0,p.jsx)("div",{className:"m-auto",children:n&&n.data.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h3",{className:"mb-2 pb-2 fs-7 pt-1",children:(0,p.jsx)("span",{className:"fw-medium",children:"Connect Account"})}),(0,p.jsxs)("div",{className:"mb-8",children:[(0,p.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 border border-dark bg-white w-100",children:[(0,p.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,p.jsx)("div",{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",children:(0,p.jsx)("img",{className:"object-center-cover",src:n.data[0].picture,height:40,width:40,alt:"instagram"})}),(0,p.jsx)("div",{className:"w-75 overflow-hidden",children:(0,p.jsxs)("span",{className:"text-start fs-7 d-block fw-bolder text-dark text-ellipsis",children:["@",n.data[0].name]})})]}),(0,p.jsx)("div",{className:"d-flex",children:(0,p.jsx)("span",{className:"h-20px w-20px",children:(0,p.jsx)("img",{className:"object-center-cover",src:(0,h.F)("media/icons/social-icons/".concat(n.provider,".svg")),alt:""})})})]}),(0,p.jsx)("span",{className:"fw-medium",children:"You are logged in with this account"})]})]}):(0,p.jsx)(p.Fragment,{children:7==t.networkId?(0,p.jsx)(f.Z,{onUpdateData:this.props.onUpdateData}):(0,p.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 btn btn-outline-secondary w-100",onClick:this.onClickSocialConnect(t),children:[(0,p.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,p.jsx)("div",{className:"symbol symbol-40 bg-light rounded-circle flex-shrink-0 me-2 overflow-hidden"}),(0,p.jsx)("div",{className:"w-75 overflow-hidden",children:(0,p.jsx)("span",{className:"text-start fs-7 d-block fw-bolder text-ellipsis",children:"Add Account"})})]}),t.networkId?(0,p.jsx)("div",{className:"d-flex",children:(0,p.jsx)("span",{className:"h-20px w-20px",children:(0,p.jsx)("img",{className:"object-center-cover",src:(0,h.F)("media/icons/social-icons/".concat((0,m.O5)(t.networkId),".svg")),alt:"network",style:{filter:"grayscale(1)",opacity:".5"}})})}):null]})})})})})}}]),n}(r.Component),C=j}}]);
//# sourceMappingURL=4685.28ad37ee.chunk.js.map