"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[5846],{25846:function(e,l,s){s.r(l),s.d(l,{default:function(){return Z}});var t=s(15671),o=s(43144),n=s(60136),a=s(29388),i=s(72791),c=s(9085),r=s(20974),d=s(42195),m=s.n(d),u=s(23794),h=s(56600),x=s(11087),p=s(62243),b=s(32002),g=s(66321),f=s(95316),j=s(29795),w=s(71035),C=s(12756),N=s(78687),y=s(18439),v=s(8663),S=s(80184),k=i.lazy((function(){return Promise.resolve().then(s.bind(s,66515))})),L=function(e){(0,n.Z)(s,e);var l=(0,a.Z)(s);function s(e){var o;return(0,t.Z)(this,s),(o=l.call(this,e)).handleClose=function(){o.setState({isLoading:!1,selectedCollaborator:null},(function(){return o.props.collaboratorCallback(!1)}))},o.createCollaborator=function(){return o.props.history("collaborator/invite")},o.onSelectCollaborator=function(e){o.setState({selectedCollaborator:e})},o.onSearchCollaborator=function(e){var l=o.state,s=l.copyRecommendedList,t=l.copyAccessList,n=s.filter((function(l){return l["UserCollab.emailId"].toLowerCase().includes(e.target.value.toLowerCase())})),a=t.filter((function(l){return l["UserCollab.emailId"].toLowerCase().includes(e.target.value.toLowerCase())}));o.setState({recommendedList:n,accessList:a})},o.onSubmit=function(){var e=o.state,l=e.selectedCollaborator,s=e.collectionId;if(l){o.setState({isLoading:!0});var t=l.permissions,n={emailId:l["UserCollab.emailId"],userType:2,workSpace:l.workspace,permission:{ugc_library:{createCollection:t.ugc_library.createCollection,collectionId:String(t.ugc_library.collectionId)+","+String(s)},publish:{widget:t.publish.widget,hashtag_camp:t.publish.hashtag_camp,d_screens:t.publish.d_screens,email_camp:t.publish.email_camp,social_publish:t.publish.social_publish,print_media:t.publish.print_media},networkManager:{manageAccount:t.networkManager.manageAccount,manageConnection:t.networkManager.manageConnection},otherSettings:{styleStudio:t.otherSettings.styleStudio,autoPilot:t.otherSettings.autoPilot,creators:t.otherSettings.creators,insights:t.otherSettings.insights,trash:t.otherSettings.trash}}};(new y.Z).post(v.Z7A,n).then((function(e){200==e.data.response_code&&(c.Am.success("Collection shared successfully."),o.setState({isLoading:!1},(function(){return o.handleClose()})))})).catch((function(e){o.setState({isLoading:!1},(function(){}))}))}else c.Am.error("Please select collaborator.")},o.state={selectedOption:null,isLoading:!1,recommendedList:[],copyRecommendedList:[],copyAccessList:[],accessList:[],collectionId:null,selectedCollaborator:null},o}return(0,o.Z)(s,[{key:"componentWillReceiveProps",value:function(e){var l=e.collaboratorList;if(e.collectionId!=this.state.collectionId){var s=l.length>0?l.filter((function(l){return""!=l.permissions&&!l.permissions.ugc_library.collectionId.includes(String(e.collectionId))})):null,t=l.length>0?l.filter((function(l){return""==l.permissions||l.permissions.ugc_library.collectionId.includes(String(e.collectionId))})):null;this.setState({collectionId:e.collectionId,recommendedList:s,isLoading:!1,selectedCollaborator:null,copyRecommendedList:s,accessList:t,copyAccessList:t})}}},{key:"render",value:function(){var e=this,l=this.props.collaboratorShowModal,s=this.state,t=s.isLoading,o=s.recommendedList,n=s.selectedCollaborator,a=s.copyRecommendedList,i=s.accessList;return(0,S.jsxs)(f.Z,{show:l,onHide:this.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,S.jsx)(f.Z.Header,{closeButton:!0,children:(0,S.jsx)(f.Z.Title,{children:"Share Collection"})}),(0,S.jsx)(f.Z.Body,{children:(0,S.jsxs)("div",{className:"connection_modal mx-xl-4 px-2 px-lg-4 mx-0",style:{maxHeight:"calc(100vh - 150px)"},children:[a&&a.length>0&&(0,S.jsx)(j.Z.Control,{size:"lg",className:"mb-3",placeholder:"Search email address",onChange:function(l){return e.onSearchCollaborator(l)}}),o&&o.length>0||i&&i.length>0?(0,S.jsxs)(S.Fragment,{children:[o&&o.length>0?(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsx)("h4",{className:"mb-2 fs-6",children:"Recommended Collaborators"}),(0,S.jsx)("div",{className:"mb-3",children:o.map((function(l,s){return(0,S.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-2 rounded-1 mb-2 cursor-pointer border border-".concat(n&&n.id==l.id?"success":"secondary"),onClick:function(){return e.onSelectCollaborator(l)},children:[(0,S.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 me-2 w-50",children:[(0,S.jsx)(C.default,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden bg-light",imageSize:40,symbolClass:"symbol-label text-light-alt fw-bolder text-uppercase fs-5",name:"Image",profileUrl:l["UserCollab.picture"]?l["UserCollab.picture"]:"",networkId:""}),(0,S.jsxs)("div",{className:"overflow-hidden",children:[(0,S.jsx)("p",{className:"text-gray-800 mb-0 w-100 fw-bold text-ellipsis",children:l["UserCollab.name"]}),(0,S.jsx)("p",{className:"mb-0 text-gray-600 text-ellipsis mb-0 fs-8",children:l["UserCollab.emailId"]})]})]}),(0,S.jsx)("div",{className:"d-flex flex-column align-items-end flex-srink-0 w-25",children:(0,S.jsx)(w.Z,{className:"py-2 px-3",bg:"light-primary",children:l["Workspace.name"]})}),(0,S.jsx)("div",{className:"d-flex flex-column align-items-end flex-srink-0 w-25",children:(0,S.jsx)("div",{className:"fs-8 text-muted fw-medium",children:"Manager"})})]},s)}))})," "]}):null,i&&i.length>0?(0,S.jsxs)(S.Fragment,{children:[" ",(0,S.jsx)("h4",{className:"mb-2 fs-6",children:"Collaborators with Access."}),(0,S.jsx)("div",{className:"mb-3",children:i.map((function(e,l){return(0,S.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-2 rounded-1 mb-2 cursor-pointer border border-".concat(n&&n.id==e.id?"success":"secondary"),children:[(0,S.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 me-2 w-50",children:[(0,S.jsx)(C.default,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden bg-light",imageSize:40,symbolClass:"symbol-label text-light-alt fw-bolder text-uppercase fs-5",name:"Image",profileUrl:e["UserCollab.picture"]?e["UserCollab.picture"]:"",networkId:""}),(0,S.jsxs)("div",{className:"overflow-hidden",children:[(0,S.jsx)("p",{className:"text-gray-800 mb-0 w-100 fw-bold text-ellipsis",children:e["UserCollab.name"]}),(0,S.jsx)("p",{className:"mb-0 text-gray-600 text-ellipsis mb-0 fs-8",children:e["UserCollab.emailId"]})]})]}),(0,S.jsx)("div",{className:"d-flex flex-column align-items-end flex-srink-0 w-25",children:(0,S.jsx)(w.Z,{className:"py-2 px-3",bg:"light-primary",children:e["Workspace.name"]})}),(0,S.jsx)("div",{className:"d-flex flex-column align-items-end flex-srink-0 w-25",children:(0,S.jsx)("div",{className:"fs-8 text-muted fw-medium",children:1==e.role?"Admin":"Manager"})})]},l)}))})," "]}):null]}):(0,S.jsx)(k,{title:"Uh-oh! Nothing to see here.",desc:"You can start adding new collaborators here.",icon:"invoice-placeholder",method:this.createCollaborator,methodTitle:"Invite Collaborator",headSize:"300px",containerSize:450,iconHeight:32,iconWidth:32,lgIcon:!0})]})}),(0,S.jsx)(f.Z.Footer,{className:"p-3",children:(0,S.jsxs)("div",{className:"mx-xl-4 px-2 px-lg-4 mx-0",children:[(0,S.jsx)("button",{type:"button",className:"btn btn-secondary btn-sm btn-min-w",onClick:this.handleClose,children:"Cancel"}),o&&o.length>0?(0,S.jsx)("button",{type:"button",className:"btn btn-primary btn-sm btn-min-w ms-3 ".concat(t?"spinner":""),onClick:this.onSubmit,children:"Share"}):null]})})]})}}]),s}(i.Component),I=(0,N.$j)((function(e){return{collaboratorList:e.collaborator.collaboratorList,userData:e.authenticated.userData}}))(L),_=s(63402),A=function(e){(0,n.Z)(s,e);var l=(0,a.Z)(s);function s(){var e;(0,t.Z)(this,s);for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(e=l.call.apply(l,[this].concat(n))).state={addCollectionShowModal:!1,collectionList:{assets:0,collection:[],collectionCount:0},myAssetsData:[],collectionListRequest:!0,assetsRequest:!0,perPage:10,currentPage:1,pageLimitOption:{value:"10",label:"10"},collaboratorShowModal:!1,collectionId:null},e.addCollectionModal=function(l){return e.setState({addCollectionShowModal:!0})},e.addCollectionCallback=function(l){e.setState({addCollectionShowModal:l})},e.addCollectionCallbackWithAPI=function(l){e.onLoadCollectionList(),e.setState({addCollectionShowModal:l})},e.onClickToExportCollection=function(e,l){return function(s){try{(0,b.P9)({name:l,filterType:"AND",images:[],layout:0,network:"",template:0,collection:String(e),source:"",assets_type:"",tags:"",ugc_status:"",publish_type:5,campaign_type:"",screen_type:"",platform:""}).then((function(e){c.Am.success("Your request submitted successfully. We will mail you Download link once your file will be ready.")})).catch((function(e){c.Am.error("Please try after some time.")}))}catch(t){c.Am.error("Please try after some time.")}}},e.collaboratorModalShow=function(l){e.setState({collectionId:l,collaboratorShowModal:!0})},e.collaboratorCallback=function(l){e.setState({collaboratorShowModal:l,collectionId:null})},e}return(0,o.Z)(s,[{key:"render",value:function(){var e=this,l=this.props,s=l.collectionList,t=l.limit,o=l.history,n=l.deleteCollection,a=l.userData,i=this.state.collaboratorShowModal;return(0,S.jsxs)(S.Fragment,{children:[s.slice(0,t).map((function(l,s){return(0,S.jsxs)("div",{className:"col-20",children:[(0,S.jsx)(r.W4,{id:"cm_dropDown-".concat(s),children:(0,S.jsx)(x.rU,{to:"/assets/".concat(l.id),className:"card card-custom gutter-b text-decoration-none rounded-2",children:(0,S.jsx)("div",{className:"card-body d-flex flex-column p-2",children:(0,S.jsxs)("div",{className:"d-flex align-items-center mr-2 w-100",children:[(0,S.jsx)(g.Z,{symbolClasses:"symbol symbol-48 flex-shrink-0 me-2 bg-light text-gray-600",iconClass:"icon-3",thumb:l.thumbnails,thumbName:(0,p.P)(l.thumbnails)}),(0,S.jsxs)("div",{className:"overflow-hidden",children:[(0,S.jsx)("p",{className:"fs-7 fw-medium mb-1 text-gray-800 text-ellipsis",children:l.name}),(0,S.jsxs)("p",{className:"mb-0 text-gray-600 text-ellipsis",children:[l.assets," Assets"]})]})]})})})}),(0,S.jsx)(r.W4,{id:"cm_dropDown-".concat(s),children:(0,S.jsxs)(r.xV,{className:"dropdown-menu show context_menu",id:"cm_dropDown-".concat(s),children:[(0,S.jsx)("div",{className:"menu-item px-2",children:(0,S.jsx)("div",{className:"menu-content text-muted px-2 py-1 fs-8 text-uppercase",children:"Choose your actions"})}),(0,S.jsx)("div",{className:"menu-item",children:(0,S.jsxs)(r.sN,{className:"dropdown-item",data:{foo:"bar"},onClick:function(e){return o("/assets/".concat(l.id))},children:[(0,S.jsx)("i",{className:"ri-folder-open-line icon-6"}),(0,S.jsx)("span",{className:"menu-title",children:"Open"})]})}),(0,S.jsx)("div",{className:"menu-item",onClick:e.props.collectionRenameEvent(l.id,l.name),children:(0,S.jsxs)(r.sN,{className:"dropdown-item",data:{foo:"bar"},onClick:e.handleClick,children:[(0,S.jsx)("i",{className:"ri-edit-box-line icon-6"}),(0,S.jsx)("span",{className:"menu-title",children:"Rename"})]})}),(0,S.jsx)("div",{className:"menu-item",children:(0,S.jsx)(r.Wd,{className:"dropdown-menu px-0 show",title:(0,S.jsxs)(r.sN,{className:"dropdown-item dropdown-arrow",hoverDelay:5e3,children:[(0,S.jsx)("span",{className:"svg-icon svg-icon-5",children:(0,S.jsx)(u.Z,{src:(0,h.F)("media/icons/svg-icons/publish-line.svg"),height:16,width:16})}),(0,S.jsx)("span",{className:"menu-title",children:"Publish to"})]}),children:(0,S.jsx)(m(),{options:{wheelPropagation:!1},children:(0,S.jsx)("div",{className:"submenu_contxt_wrap",children:_.j$.map((function(s){return(0,S.jsx)("div",{className:"menu-item text-decoration-none",children:(0,S.jsxs)(r.sN,{className:"dropdown-item ".concat("Social Ads"==s.name?"disabled":""),onClick:function(t){return"Social Publish"==s.name?e.props.history("/".concat(s.link,"?collectionId=").concat(l.id)):e.props.history("/".concat(s.link,"/create?collectionId=").concat(l.id))},children:["Print Media"==s.name||"Social Ads"==s.name?(0,S.jsx)("span",{className:"svg-icon svg-icon-5",children:(0,S.jsx)(u.Z,{src:(0,h.F)("media/icons/svg-icons/".concat(s.icon,".svg")),height:16,width:16})}):(0,S.jsx)("i",{className:"".concat(s.icon," icon-6"),style:"Social Publish"==s.name?{transform:"scaleX(-1)"}:{}}),(0,S.jsx)("span",{className:"menu-title",children:s.name})]})})}))})})})}),(0,S.jsx)("hr",{className:"my-1"}),!a||""!=a.collaborator&&"0"!=a.collaborator.activeAccount&&""!=a.collaborator.permissions?null:(0,S.jsx)("div",{className:"menu-item",onClick:function(){return e.collaboratorModalShow(l.id)},children:(0,S.jsxs)(r.sN,{className:"dropdown-item",children:[(0,S.jsx)("i",{className:"ri-share-box-line icon-6"}),(0,S.jsx)("span",{className:"menu-title",children:"Share"})]})}),(0,S.jsx)("div",{className:"menu-item",onClick:e.onClickToExportCollection(l.id,l.name),children:(0,S.jsxs)(r.sN,{className:"dropdown-item",children:[(0,S.jsx)("i",{className:"ri-download-2-line icon-6"}),(0,S.jsx)("span",{className:"menu-title",children:"Export"})]})}),(0,S.jsx)("div",{className:"menu-item",onClick:n(l.id),children:(0,S.jsxs)(r.sN,{className:"dropdown-item",children:[(0,S.jsx)("i",{className:"ri-delete-bin-6-line icon-6"}),(0,S.jsx)("span",{className:"menu-title",children:"Move to Trash"})]})})]})})]},s)})),(0,S.jsx)(I,{collaboratorCallback:this.collaboratorCallback,collaboratorShowModal:i,collectionId:this.state.collectionId,history:o})]})}}]),s}(i.Component),Z=A}}]);
//# sourceMappingURL=5846.90506ce1.chunk.js.map