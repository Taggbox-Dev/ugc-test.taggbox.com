"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[431],{70431:function(e,t,a){a.r(t);var n=a(15671),s=a(43144),o=a(97326),c=a(60136),i=a(29388),r=a(72791),l=a(21830),d=a.n(l),u=a(55920),h=a(8663),m=a(56600),p=a(12756),f=a(49907),g=a(2841),k=a(7566),w=a(23544),x=a(25554),b=a(78027),v=a(32002),y=a(46900),j=a(80184),N=new BroadcastChannel("connect"),I=new u.Z,_=function(e){(0,c.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={connected:null,showConfirm:!1},e.onLoadSocialAccount=function(){try{var t=e.props.modalAssetData;if(I.get("ugcRights".concat(t.networkId))){var a=I.get("ugcRights".concat(t.networkId));a&&a.length>0&&e.setState({access_token:"",socialData:null,accountsData:a},(function(){return e.props.onUpdateData(String((0,g.O5)(t.networkId)).toLowerCase(),a)}))}}catch(n){}},e.readAuthenticationCode=function(t){var a=JSON.parse(t.data),n=a.data,s=a.networkId,c=a.type,i=(0,o.Z)(e);if("get-rights"==c){JSON.parse(t.data);var r=e.props.modalAssetData;if(2==r.networkId||18==r.networkId)(0,x.YK)(n,(function(t){(0,v.H$)({access_token:t.token}).then((function(t){var a=t.data,n=[];a&&Object.keys(a).length>0&&n.push({id:a.id,name:a.username,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(r.networkId),".svg"))}),I.set("ugcRights".concat(r.networkId),JSON.stringify(n),{path:"/"}),i.setState({access_token:a.token,socialData:t.data,accountsData:n},(function(){return e.props.onUpdateData("instagram",n)}))}))}));else if(3==r.networkId)(0,x.XN)(n,s,(function(t){(0,v.pV)({access_token:t.token}).then((function(a){var n=a.data.pages,s=[];n&&n.length>0&&n.map((function(e){s.push({id:e.id,name:e.name,access_token:e.access_token,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(r.networkId),".svg"))})})),I.set("ugcRights".concat(r.networkId),JSON.stringify(s),{path:"/"}),i.setState({access_token:t.token,socialData:a.data,accountsData:s},(function(){return e.props.onUpdateData("facebook",s)}))}))}));else if(1==r.networkId){var l=[];n&&Object.keys(n).length>0&&l.push({id:n.id_str,name:n.name,picture:n.picture?n.picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(r.networkId),".svg"))}),I.set("ugcRights".concat(r.networkId),JSON.stringify(l),{path:"/"}),i.setState({access_token:localStorage.getItem("tokenSecret"),socialData:n,accountsData:l},(function(){return e.props.onUpdateData("twitter",l)}))}else if(28==r.networkId){l=[];n&&Object.keys(n).length>0&&l.push({id:n.display_name,name:n.display_name,picture:n.avatar?n.avatar:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(r.networkId),".svg"))}),I.set("ugcRights".concat(r.networkId),JSON.stringify(l),{path:"/"}),i.setState({access_token:n.client_key,socialData:n,accountsData:l},(function(){return e.props.onUpdateData("tiktok",l)}))}else(0,b.Jr)(n,s,(function(e){}))}},e.handleYes=function(t){e.setState({showConfirm:!0})},e.handleNo=function(t){e.setState({showConfirm:!0})},e.onClickSocialConnect=function(e){return function(t){e&&Object.keys(e).length>0&&d().fire({imageUrl:(0,m.F)("media/icons/social-icons-square/".concat((0,g.O5)(e.networkId),".svg")),imageHeight:40,imageWidth:40,title:"<strong>".concat((0,g.nX)((0,g.O5)(e.networkId)),"</strong>"),html:"Add an account to continue",showCloseButton:!0,showCancelButton:!1,focusConfirm:!0,confirmButtonText:"Continue with ".concat((0,g.nX)((0,g.O5)(e.networkId))),confirmButtonAriaLabel:"Continue with ".concat((0,g.nX)((0,g.O5)(e.networkId)))}).then((function(t){if(t.isConfirmed)switch(localStorage.setItem("networkId",e.networkId),localStorage.setItem("connectionType","get-rights"),e.networkId){case 1:(0,y.ov)();break;case 6:(0,k.nY)(6);break;case 21:(0,w.$8)();break;case 11:(0,k.GC)(11);break;case 8:(0,w.ok)();break;case 3:(0,w.vr)(3);break;case 28:(0,w.Bq)();break;case 2:var a="https://api.instagram.com/oauth/authorize?client_id=".concat(h.yz,"&redirect_uri=").concat(h.XP,"/instagram/feeds/authCallback/&scope=user_profile,user_media&response_type=code");window.open(a,"_blank","width=786,height=786");break;case 18:var n="https://api.instagram.com/oauth/authorize?client_id=".concat(h.yz,"&redirect_uri=").concat(h.XP,"/instagram/feeds/authCallback/&scope=user_profile,user_media&response_type=code");window.open(n,"_blank","width=786,height=786")}}))}},e}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){N.addEventListener("message",this.readAuthenticationCode),this.onLoadSocialAccount()}},{key:"componentWillUnmount",value:function(){N.removeEventListener("message",this.readAuthenticationCode)}},{key:"render",value:function(){this.state.showConfirm;var e=this.props,t=e.modalAssetData,a=e.connectedAccount;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"p-lg-6 p-3",children:(0,j.jsxs)("div",{className:"m-auto",children:[a&&a.data.length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h3",{className:"mb-2 pb-2 fs-7 pt-1",children:(0,j.jsx)("span",{className:"fw-medium",children:"Connect Account"})}),(0,j.jsxs)("div",{className:"mb-3",children:[(0,j.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 btn btn-outline-secondary w-100",children:[(0,j.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,j.jsx)(p.default,{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",imageSize:40,symbolClass:"symbol-label text-light-alt fw-bolder text-uppercase fs-5",name:a.data[0].name,profileUrl:"",networkId:t.networkId}),(0,j.jsx)("div",{className:"w-75 overflow-hidden",children:(0,j.jsxs)("span",{className:"text-start fs-7 d-block fw-bolder text-dark text-ellipsis",children:["@",a.data[0].name]})})]}),(0,j.jsx)("div",{className:"d-flex",children:(0,j.jsx)("span",{className:"h-20px w-20px",children:(0,j.jsx)("img",{className:"object-center-cover",src:(0,m.F)("media/icons/social-icons/".concat(a.provider,".svg")),height:20,width:20,alt:(0,g.BK)(a.provider)})})})]}),(0,j.jsx)("span",{className:"fw-medium",children:"You are logged in with this account"})]}),(0,j.jsxs)("div",{className:"d-flex align-items-center w-75 mb-3 mx-auto",children:[(0,j.jsx)("span",{className:"border-bottom d-flex flex-grow-1"}),(0,j.jsx)("span",{className:"d-flex flex-shrink-0 mx-5 fs-6 fw-semibold text-gray-400",children:"Or"}),(0,j.jsx)("span",{className:"border-bottom d-flex flex-grow-1"})]})]}):null,(0,j.jsx)(j.Fragment,{children:7==t.networkId?(0,j.jsx)(f.Z,{onUpdateData:this.props.onUpdateData}):(0,j.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 btn btn-outline-secondary w-100",onClick:this.onClickSocialConnect(t),children:[(0,j.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,j.jsx)("div",{className:"symbol symbol-40 bg-light rounded-circle flex-shrink-0 me-2 overflow-hidden"}),(0,j.jsx)("div",{className:"w-75 overflow-hidden",children:(0,j.jsx)("span",{className:"text-start fs-7 d-block fw-bolder text-ellipsis",children:"Add Account"})})]}),t.networkId?(0,j.jsx)("div",{className:"d-flex",children:(0,j.jsx)("span",{className:"h-20px w-20px",children:(0,j.jsx)("img",{className:"object-center-cover",src:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(t.networkId),".svg")),height:20,width:20,alt:(0,g.BK)(t.networkId),style:{filter:"grayscale(1)",opacity:".5"}})})}):null]})})]})})})}}]),a}(r.Component);t.default=_}}]);
//# sourceMappingURL=431.bb080544.chunk.js.map